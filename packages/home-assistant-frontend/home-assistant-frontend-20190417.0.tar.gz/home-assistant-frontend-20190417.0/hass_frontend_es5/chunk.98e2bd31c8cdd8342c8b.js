/*! For license information please see chunk.98e2bd31c8cdd8342c8b.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{134:function(n,e,t){"use strict";t(4),t(45),t(136);var r=t(6),a=t(3),o=t(112);function i(){var n=function(n,e){e||(e=n.slice(0));return Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}(['\n    <style include="paper-item-shared-styles">\n      :host {\n        @apply --layout-horizontal;\n        @apply --layout-center;\n        @apply --paper-font-subhead;\n\n        @apply --paper-item;\n      }\n    </style>\n    <slot></slot>\n']);return i=function(){return n},n}Object(r.a)({_template:Object(a.a)(i()),is:"paper-item",behaviors:[o.a]})},186:function(n,e,t){"use strict";var r=t(3),a=t(21);t(88);function o(n){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function i(){var n=function(n,e){e||(e=n.slice(0));return Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}(['\n      <style include="iron-flex ha-style">\n        .content {\n          padding: 28px 20px 0;\n          max-width: 1040px;\n          margin: 0 auto;\n        }\n\n        .header {\n          @apply --paper-font-display1;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        .together {\n          margin-top: 32px;\n        }\n\n        .intro {\n          @apply --paper-font-subhead;\n          width: 100%;\n          max-width: 400px;\n          margin-right: 40px;\n          opacity: var(--dark-primary-opacity);\n        }\n\n        .panel {\n          margin-top: -24px;\n        }\n\n        .panel ::slotted(*) {\n          margin-top: 24px;\n          display: block;\n        }\n\n        .narrow.content {\n          max-width: 640px;\n        }\n        .narrow .together {\n          margin-top: 20px;\n        }\n        .narrow .header {\n          @apply --paper-font-headline;\n        }\n        .narrow .intro {\n          font-size: 14px;\n          padding-bottom: 20px;\n          margin-right: 0;\n          max-width: 500px;\n        }\n      </style>\n      <div class$="[[computeContentClasses(isWide)]]">\n        <div class="header"><slot name="header"></slot></div>\n        <div class$="[[computeClasses(isWide)]]">\n          <div class="intro"><slot name="introduction"></slot></div>\n          <div class="panel flex-auto"><slot></slot></div>\n        </div>\n      </div>\n    ']);return i=function(){return n},n}function s(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function c(n,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):e}function p(n){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function u(n,e){return(u=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}var l=function(n){function e(){return function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,p(e).apply(this,arguments))}var t,o,l;return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&u(n,e)}(e,a["a"]),t=e,l=[{key:"template",get:function(){return Object(r.a)(i())}},{key:"properties",get:function(){return{hass:{type:Object},narrow:{type:Boolean},isWide:{type:Boolean,value:!1}}}}],(o=[{key:"computeContentClasses",value:function(n){return n?"content ":"content narrow"}},{key:"computeClasses",value:function(n){return"together layout "+(n?"horizontal":"vertical narrow")}}])&&s(t.prototype,o),l&&s(t,l),e}();customElements.define("ha-config-section",l)},225:function(n,e,t){"use strict";e.a=function(n,e){return n<e?-1:n>e?1:0}},230:function(n,e,t){"use strict";t(4),t(45),t(101),t(174),t(55),t(42);var r=t(52),a=t(33),o=t(63),i={properties:{elevation:{type:Number,reflectToAttribute:!0,readOnly:!0}},observers:["_calculateElevation(focused, disabled, active, pressed, receivedFocusFromKeyboard)","_computeKeyboardClass(receivedFocusFromKeyboard)"],hostAttributes:{role:"button",tabindex:"0",animated:!0},_calculateElevation:function(){var n=1;this.disabled?n=0:this.active||this.pressed?n=4:this.receivedFocusFromKeyboard&&(n=3),this._setElevation(n)},_computeKeyboardClass:function(n){this.toggleClass("keyboard-focus",n)},_spaceKeyDownHandler:function(n){r.b._spaceKeyDownHandler.call(this,n),this.hasRipple()&&this.getRipple().ripples.length<1&&this._ripple.uiDownAction()},_spaceKeyUpHandler:function(n){r.b._spaceKeyUpHandler.call(this,n),this.hasRipple()&&this._ripple.uiUpAction()}},s=[r.a,a.a,o.a,i],c=t(6),p=t(3);function u(){var n=function(n,e){e||(e=n.slice(0));return Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}(['\n  <style include="paper-material-styles">\n    :host {\n      @apply --layout-vertical;\n      @apply --layout-center-center;\n\n      background: var(--paper-fab-background, var(--accent-color));\n      border-radius: 50%;\n      box-sizing: border-box;\n      color: var(--text-primary-color);\n      cursor: pointer;\n      height: 56px;\n      min-width: 0;\n      outline: none;\n      padding: 16px;\n      position: relative;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n      width: 56px;\n      z-index: 0;\n\n      /* NOTE: Both values are needed, since some phones require the value `transparent`. */\n      -webkit-tap-highlight-color: rgba(0,0,0,0);\n      -webkit-tap-highlight-color: transparent;\n\n      @apply --paper-fab;\n    }\n\n    [hidden] {\n      display: none !important;\n    }\n\n    :host([mini]) {\n      width: 40px;\n      height: 40px;\n      padding: 8px;\n\n      @apply --paper-fab-mini;\n    }\n\n    :host([disabled]) {\n      color: var(--paper-fab-disabled-text, var(--paper-grey-500));\n      background: var(--paper-fab-disabled-background, var(--paper-grey-300));\n\n      @apply --paper-fab-disabled;\n    }\n\n    iron-icon {\n      @apply --paper-fab-iron-icon;\n    }\n\n    span {\n      width: 100%;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      text-align: center;\n\n      @apply --paper-fab-label;\n    }\n\n    :host(.keyboard-focus) {\n      background: var(--paper-fab-keyboard-focus-background, var(--paper-pink-900));\n    }\n\n    :host([elevation="1"]) {\n      @apply --paper-material-elevation-1;\n    }\n\n    :host([elevation="2"]) {\n      @apply --paper-material-elevation-2;\n    }\n\n    :host([elevation="3"]) {\n      @apply --paper-material-elevation-3;\n    }\n\n    :host([elevation="4"]) {\n      @apply --paper-material-elevation-4;\n    }\n\n    :host([elevation="5"]) {\n      @apply --paper-material-elevation-5;\n    }\n  </style>\n\n  <iron-icon id="icon" hidden$="{{!_computeIsIconFab(icon, src)}}" src="[[src]]" icon="[[icon]]"></iron-icon>\n  <span hidden$="{{_computeIsIconFab(icon, src)}}">{{label}}</span>\n'],['\n  <style include="paper-material-styles">\n    :host {\n      @apply --layout-vertical;\n      @apply --layout-center-center;\n\n      background: var(--paper-fab-background, var(--accent-color));\n      border-radius: 50%;\n      box-sizing: border-box;\n      color: var(--text-primary-color);\n      cursor: pointer;\n      height: 56px;\n      min-width: 0;\n      outline: none;\n      padding: 16px;\n      position: relative;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      -webkit-user-select: none;\n      user-select: none;\n      width: 56px;\n      z-index: 0;\n\n      /* NOTE: Both values are needed, since some phones require the value \\`transparent\\`. */\n      -webkit-tap-highlight-color: rgba(0,0,0,0);\n      -webkit-tap-highlight-color: transparent;\n\n      @apply --paper-fab;\n    }\n\n    [hidden] {\n      display: none !important;\n    }\n\n    :host([mini]) {\n      width: 40px;\n      height: 40px;\n      padding: 8px;\n\n      @apply --paper-fab-mini;\n    }\n\n    :host([disabled]) {\n      color: var(--paper-fab-disabled-text, var(--paper-grey-500));\n      background: var(--paper-fab-disabled-background, var(--paper-grey-300));\n\n      @apply --paper-fab-disabled;\n    }\n\n    iron-icon {\n      @apply --paper-fab-iron-icon;\n    }\n\n    span {\n      width: 100%;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      text-align: center;\n\n      @apply --paper-fab-label;\n    }\n\n    :host(.keyboard-focus) {\n      background: var(--paper-fab-keyboard-focus-background, var(--paper-pink-900));\n    }\n\n    :host([elevation="1"]) {\n      @apply --paper-material-elevation-1;\n    }\n\n    :host([elevation="2"]) {\n      @apply --paper-material-elevation-2;\n    }\n\n    :host([elevation="3"]) {\n      @apply --paper-material-elevation-3;\n    }\n\n    :host([elevation="4"]) {\n      @apply --paper-material-elevation-4;\n    }\n\n    :host([elevation="5"]) {\n      @apply --paper-material-elevation-5;\n    }\n  </style>\n\n  <iron-icon id="icon" hidden\\$="{{!_computeIsIconFab(icon, src)}}" src="[[src]]" icon="[[icon]]"></iron-icon>\n  <span hidden\\$="{{_computeIsIconFab(icon, src)}}">{{label}}</span>\n']);return u=function(){return n},n}var l=Object(p.a)(u());l.setAttribute("strip-whitespace",""),Object(c.a)({_template:l,is:"paper-fab",behaviors:[s],properties:{src:{type:String,value:""},icon:{type:String,value:""},mini:{type:Boolean,value:!1,reflectToAttribute:!0},label:{type:String,observer:"_labelChanged"}},_labelChanged:function(){this.setAttribute("aria-label",this.label)},_computeIsIconFab:function(n,e){return n.length>0||e.length>0}})},312:function(n,e,t){"use strict";function r(n,e,t,r,a,o,i){try{var s=n[o](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,a)}function a(n){return function(){var e=this,t=arguments;return new Promise(function(a,o){var i=n.apply(e,t);function s(n){r(i,a,o,s,c,"next",n)}function c(n){r(i,a,o,s,c,"throw",n)}s(void 0)})}}t.d(e,"a",function(){return o}),t.d(e,"b",function(){return i}),t.d(e,"d",function(){return s}),t.d(e,"e",function(){return c}),t.d(e,"c",function(){return p});var o="system-admin",i="system-users",s=function(){var n=a(regeneratorRuntime.mark(function n(e){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.callWS({type:"config/auth/list"}));case 1:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),c=function(){var n=a(regeneratorRuntime.mark(function n(e,t,r){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.callWS(Object.assign({},r,{type:"config/auth/update",user_id:t})));case 1:case"end":return n.stop()}},n)}));return function(e,t,r){return n.apply(this,arguments)}}(),p=function(){var n=a(regeneratorRuntime.mark(function n(e,t){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.callWS({type:"config/auth/delete",user_id:t}));case 1:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}()},645:function(n,e,t){"use strict";t.r(e);var r=t(5),a=(t(134),t(173),t(166),t(230),function(n,e){return n.callWS(Object.assign({type:"person/create"},e))}),o=(t(144),t(150),t(225)),i=(t(186),t(43)),s=function(){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(4),t.e(96)]).then(t.bind(null,701))},c=t(312);function p(n){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function u(){var n=_(["\n      a {\n        color: var(--primary-color);\n      }\n      paper-card {\n        display: block;\n        max-width: 600px;\n        margin: 16px auto;\n      }\n      .empty {\n        text-align: center;\n        padding: 8px;\n      }\n      paper-item {\n        padding-top: 4px;\n        padding-bottom: 4px;\n      }\n      paper-card.storage paper-item {\n        cursor: pointer;\n      }\n      paper-fab {\n        position: fixed;\n        bottom: 16px;\n        right: 16px;\n        z-index: 1;\n      }\n\n      paper-fab[is-wide] {\n        bottom: 24px;\n        right: 24px;\n      }\n    "]);return u=function(){return n},n}function l(n,e,t,r,a,o,i){try{var s=n[o](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(r,a)}function f(n){return function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(n){l(o,r,a,i,s,"next",n)}function s(n){l(o,r,a,i,s,"throw",n)}i(void 0)})}}function d(){var n=_(["\n                      <paper-item>\n                        <paper-item-body>\n                          ","\n                        </paper-item-body>\n                      </paper-item>\n                    "]);return d=function(){return n},n}function h(){var n=_(['\n                <paper-card heading="Configuration.yaml persons">\n                  ',"\n                </paper-card>\n              "]);return h=function(){return n},n}function b(){var n=_([""]);return b=function(){return n},n}function y(){var n=_(['\n                  <div class="empty">\n                    Looks like you have not created any persons yet.\n                    <mwc-button @click=',">\n                      CREATE PERSON</mwc-button\n                    >\n                  </div>\n                "]);return y=function(){return n},n}function v(){var n=_(["\n                <paper-item @click="," .entry=",">\n                  <paper-item-body>\n                    ","\n                  </paper-item-body>\n                </paper-item>\n              "]);return v=function(){return n},n}function m(){var n=_(["\n                  <p>\n                    Note: persons configured via configuration.yaml cannot be\n                    edited via the UI.\n                  </p>\n                "]);return m=function(){return n},n}function g(){var n=_(['\n      <hass-subpage header="Persons">\n        <ha-config-section .isWide=','>\n          <span slot="header">Persons</span>\n          <span slot="introduction">\n            Here you can define each person of interest in Home Assistant.\n            ','\n          </span>\n          <paper-card class="storage">\n            ',"\n            ","\n          </paper-card>\n          ","\n        </ha-config-section>\n      </hass-subpage>\n\n      <paper-fab\n        ?is-wide=",'\n        icon="hass:plus"\n        title="Create Area"\n        @click=',"\n      ></paper-fab>\n    "]);return g=function(){return n},n}function w(){var n=_(["\n        <hass-loading-screen></hass-loading-screen>\n      "]);return w=function(){return n},n}function _(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function x(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function O(n,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n):e}function k(n,e,t){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(n,e,t){var r=function(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&null!==(n=j(n)););return n}(n,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(t):a.value}})(n,e,t||n)}function j(n){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function I(n,e){return(I=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}var P=function(n){function e(){var n,t;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=O(this,(n=j(e)).call.apply(n,[this].concat(a)))).hass=void 0,t.isWide=void 0,t._storageItems=void 0,t._configItems=void 0,t._usersLoad=void 0,t}var t,p,l;return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&I(n,e)}(e,r["a"]),t=e,p=[{key:"render",value:function(){var n=this;return this.hass&&void 0!==this._storageItems&&void 0!==this._configItems?Object(r.e)(g(),this.isWide,this._configItems.length>0?Object(r.e)(m()):"",this._storageItems.map(function(e){return Object(r.e)(v(),n._openEditEntry,e,e.name)}),0===this._storageItems.length?Object(r.e)(y(),this._createPerson):Object(r.e)(b()),this._configItems.length>0?Object(r.e)(h(),this._configItems.map(function(n){return Object(r.e)(d(),n.name)})):"",this.isWide,this._createPerson):Object(r.e)(w())}},{key:"firstUpdated",value:function(n){k(j(e.prototype),"firstUpdated",this).call(this,n),this._fetchData(),s()}},{key:"_fetchData",value:function(){var n=f(regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this._usersLoad=Object(c.d)(this.hass),n.next=3,this.hass.callWS({type:"person/list"});case 3:e=n.sent,this._storageItems=e.storage.sort(function(n,e){return Object(o.a)(n.name,e.name)}),this._configItems=e.config.sort(function(n,e){return Object(o.a)(n.name,e.name)});case 6:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}()},{key:"_createPerson",value:function(){this._openDialog()}},{key:"_openEditEntry",value:function(n){var e=n.currentTarget.entry;this._openDialog(e)}},{key:"_allowedUsers",value:function(n,e){for(var t=new Set,r=[this._configItems,this._storageItems],a=0;a<r.length;a++){var o=r[a],i=!0,s=!1,c=void 0;try{for(var p,u=o[Symbol.iterator]();!(i=(p=u.next()).done);i=!0){var l=p.value;l.user_id&&t.add(l.user_id)}}catch(n){s=!0,c=n}finally{try{i||null==u.return||u.return()}finally{if(s)throw c}}}var f=e?e.user_id:void 0;return n.filter(function(n){return n.id===f||!t.has(n.id)})}},{key:"_openDialog",value:function(){var n=f(regeneratorRuntime.mark(function n(e){var t,r=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this._usersLoad;case 2:t=n.sent,c=this,p={entry:e,users:this._allowedUsers(t,e),createEntry:function(){var n=f(regeneratorRuntime.mark(function n(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(r.hass,e);case 2:t=n.sent,r._storageItems=r._storageItems.concat(t).sort(function(n,e){return Object(o.a)(n.name,e.name)});case 4:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),updateEntry:function(){var n=f(regeneratorRuntime.mark(function n(t){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o=r.hass,i=e.id,s=t,o.callWS(Object.assign({type:"person/update",person_id:i},s));case 2:a=n.sent,r._storageItems=r._storageItems.map(function(n){return n===e?a:n});case 4:case"end":return n.stop()}var o,i,s},n)}));return function(e){return n.apply(this,arguments)}}(),removeEntry:function(){var n=f(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(confirm("Are you sure you want to delete this person?\n\nAll devices belonging to this person will become unassigned.")){n.next=2;break}return n.abrupt("return",!1);case 2:return n.prev=2,n.next=5,t=r.hass,a=e.id,t.callWS({type:"person/delete",person_id:a});case 5:return r._storageItems=r._storageItems.filter(function(n){return n!==e}),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(2),n.abrupt("return",!1);case 12:case"end":return n.stop()}var t,a},n,null,[[2,9]])}));return function(){return n.apply(this,arguments)}}()},Object(i.a)(c,"show-dialog",{dialogTag:"dialog-person-detail",dialogImport:s,dialogParams:p});case 4:case"end":return n.stop()}var c,p},n,this)}));return function(e){return n.apply(this,arguments)}}()}],l=[{key:"properties",get:function(){return{hass:{},isWide:{},_storageItems:{},_configItems:{}}}},{key:"styles",get:function(){return Object(r.c)(u())}}],p&&x(t.prototype,p),l&&x(t,l),e}();customElements.define("ha-config-person",P)}}]);
//# sourceMappingURL=chunk.98e2bd31c8cdd8342c8b.js.map