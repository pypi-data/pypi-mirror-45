{"version":3,"sources":["wsrpc.js"],"names":["global","preventUseWithoutNew","self","func","constructor","Error","window","Deferred","this","wrapper","done","apply","arguments","resolve","reject","promise","Promise","isPending","Object","freeze","console","error","Q","defer","logGroup","group","level","args","groupEnd","join","log","WSRPC","DEBUG","trace","msg","TRACE","payload","JSON","parse","data","readyState","0","1","2","3","WSRPCConstructor","URL","reconnectTimeout","createSocket","ev","rejectQueue","deferred","connectionNumber","callQueue","length","callObj","shift","store","serial","key","hasOwnProperty","ws","WebSocket","tryCallEvent","event","e","stack","callEvents","evName","oneTimeEventStore","i","eventStore","onclose","err","public","state","setTimeout","socket","id","exc","reconnect","onerror","onopen","send","stringify","onmessage","message","type","routes","method","then","result","asyncRoutes","params","badPromise","promiseMock","handleCall","handleError","handleResult","exception","url","test","location","host","protocol","getAbsoluteWsUrl","eventId","socketStarted","onconnect","onchange","call","push","makeCall","addRoute","route","callback","isAsync","deleteRoute","addEventListener","removeEventListener","index","onEvent","destroy","close","stateCode","connect","argsObj","info"],"mappings":"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"}