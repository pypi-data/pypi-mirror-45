!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=491)}({1:function(e,t){e.exports=riot},179:function(e,t,r){e.exports=r.p+"assets/media/mecanum-drivebase.png"},491:function(e,t,r){e.exports=r(492)},492:function(e,t,r){"use strict";r.r(t);r(493);var i=r(179),a=r.n(i);dashboard.registerWidget("mecanum-drivebase",{label:"Mecanum Drivebase",category:"Basic",acceptedTypes:["MecanumDrive"],image:a.a,minX:7,minY:5})},493:function(e,t,r){var i=r(1);i.tag2("script","","","",function(e){}),i.tag2("mecanum-drivebase",'<div class="diff-drive-container"> <div class="speed-pair"> <div class="speed"> <axis ticks="5" vertical="{true}" range="{[-1, 1]}"></axis> <div ref="bar" class="bar"> <div class="foreground" riot-style="{getFlForegroundStyle()}"></div> </div> </div> <div class="speed"> <axis ticks="5" vertical="{true}" range="{[-1, 1]}"></axis> <div ref="bar" class="bar"> <div class="foreground" riot-style="{getRlForegroundStyle()}"></div> </div> </div> </div> <svg ref="svg" width="250" height="250"> <g ref="forceVector"></g> <g ref="drivetrain" class="drivetrain"></g> </svg> <div class="speed-pair"> <div class="speed"> <axis ticks="5" vertical="{true}" range="{[-1, 1]}"></axis> <div ref="bar" class="bar"> <div class="foreground" riot-style="{getFrForegroundStyle()}"></div> </div> </div> <div class="speed"> <axis ticks="5" vertical="{true}" range="{[-1, 1]}"></axis> <div ref="bar" class="bar"> <div class="foreground" riot-style="{getRrForegroundStyle()}"></div> </div> </div> </div> </div>','mecanum-drivebase .diff-drive-container,[data-is="mecanum-drivebase"] .diff-drive-container{ height: 100%; display: flex; flex-direction: row; align-items: center; justify-content: center; } mecanum-drivebase svg .x,[data-is="mecanum-drivebase"] svg .x{ stroke: rgb(50,50,255); stroke-width: 2; } mecanum-drivebase svg .arrow line,[data-is="mecanum-drivebase"] svg .arrow line,mecanum-drivebase svg .arrow path,[data-is="mecanum-drivebase"] svg .arrow path{ stroke: rgb(50,50,255); stroke-width: 2; fill: none; } mecanum-drivebase svg .arrow polygon,[data-is="mecanum-drivebase"] svg .arrow polygon{ stroke: rgb(50,50,255); fill: rgb(50,50,255); } mecanum-drivebase svg .drivetrain,[data-is="mecanum-drivebase"] svg .drivetrain{ fill: none; stroke: black; } mecanum-drivebase .bar,[data-is="mecanum-drivebase"] .bar{ position: relative; height: calc(100% - 25px); width: 20px; border-radius: 3px; margin: 15px 0; background: #DDD; } mecanum-drivebase .speed,[data-is="mecanum-drivebase"] .speed{ display: flex; height: 45%; flex-direction: row; align-items: center; margin-left: 30px; } mecanum-drivebase axis,[data-is="mecanum-drivebase"] axis{ width: 10px; height: calc(100% - 30px); } mecanum-drivebase .foreground,[data-is="mecanum-drivebase"] .foreground{ position: absolute; top: 0; width: 20px; background: lightblue; border-radius: 3px; }',"",function(e){this.fl=0,this.fr=0,this.rl=0,this.rr=0,this.drawMotionVector=((e,t,r,i)=>{const a={x:(e-t-r+i)/4,y:(e+t+r+i)/4},s=(-e+t-r+i)/4,n=Math.hypot(a.x,a.y),o=Math.atan2(a.y,a.x);if(Math.abs(s)<=.01&&n<=.01)return function(e){const t=e/2;return`<g class="x" transform="translate(125, 125)">${`<line\n                                x1="${-t}"\n                                y1="${-t}"\n                                x2="${t}"\n                                y2="${t}"/>`} ${`<line\n                                x1="${-t}"\n                                y1="${t}"\n                                x2="${t}"\n                                y2="${-t}"/>`}</g>`}(25);let d="",c="",l="";return Math.abs(s)>.01&&(d=window.dashboard.CurvedArrow.createPolar(0,60,-s*Math.PI,0,8),c=window.dashboard.CurvedArrow.createPolar(Math.PI,60,-s*Math.PI,0,8)),n>.01&&(l=window.dashboard.CurvedArrow.createStraight(60*n,-o,0,8)),`<g class="arrow" transform="translate(125, 125)">${d} ${c} ${l}</g>`}),this.drawDrivetrain=((e,t,r)=>{const i=(250-e)/2,a=(250-t)/2,s=i+e,n=a+t;return`<rect\n                            width="${e}"\n                            height="${t}"\n                            x="${i}"\n                            y="${a}" />`+`<rect\n                                width="30"\n                                height="${2*r}"\n                                x="${i-30}"\n                                y="${a}" />`+`<rect\n                                width="30"\n                                height="${2*r}"\n                                x="${s}"\n                                y="${a}" />`+`<rect\n                                width="30"\n                                height="${2*r}"\n                                x="${i-30}"\n                                y="${n-2*r}" />`+`<rect\n                                width="30"\n                                height="${2*r}"\n                                x="${s}"\n                                y="${n-2*r}" />`}),this.getFlForegroundStyle=(()=>this.getForegroundStyle(this.fl)),this.getFrForegroundStyle=(()=>this.getForegroundStyle(this.fr)),this.getRlForegroundStyle=(()=>this.getForegroundStyle(this.rl)),this.getRrForegroundStyle=(()=>this.getForegroundStyle(this.rr)),this.getForegroundStyle=(e=>{const t=Math.clamp(e,-1,1);return t>0?{height:Math.abs(t)/2*100+"%",top:Math.abs(-1)/2*100+"%",bottom:"auto"}:{height:Math.abs(t)/2*100+"%",top:"auto",bottom:Math.abs(1)/2*100+"%"}}),this.on("mount",()=>{let e=this.drawMotionVector(0,0,0,0);$(this.refs.drivetrain).html(this.drawDrivetrain(150,200,35)),$(this.refs.forceVector).html(e)}),this.on("update",()=>{this.fl=this.opts.table["Front Left Motor Speed"]||0,this.fr=this.opts.table["Front Right Motor Speed"]||0,this.rl=this.opts.table["Rear Left Motor Speed"]||0,this.rr=this.opts.table["Rear Right Motor Speed"]||0;let e=this.drawMotionVector(this.fl,this.fr,this.rl,this.rr);$(this.refs.forceVector).html(e)})})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicmlvdFwiIiwid2VicGFjazovLy8uL3dpZGdldHMvbWVjYW51bS1kcml2ZWJhc2UvbWVjYW51bS1kcml2ZWJhc2UucG5nIiwid2VicGFjazovLy8uL3dpZGdldHMvbWVjYW51bS1kcml2ZWJhc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vd2lkZ2V0cy9tZWNhbnVtLWRyaXZlYmFzZS9tZWNhbnVtLWRyaXZlYmFzZS50YWciXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJyaW90IiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9tZWNhbnVtX2RyaXZlYmFzZV9wbmdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsIl9tZWNhbnVtX2RyaXZlYmFzZV9wbmdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0IiwiZGFzaGJvYXJkIiwicmVnaXN0ZXJXaWRnZXQiLCJsYWJlbCIsImNhdGVnb3J5IiwiYWNjZXB0ZWRUeXBlcyIsImltYWdlIiwibWluWCIsIm1pblkiLCJ0YWcyIiwib3B0cyIsInRoaXMiLCJmbCIsImZyIiwicmwiLCJyciIsImRyYXdNb3Rpb25WZWN0b3IiLCJkaXJlY3Rpb24iLCJ4IiwieSIsIm1vbWVudCIsImRpcmVjdGlvbk1hZ25pdHVkZSIsIk1hdGgiLCJoeXBvdCIsImRpcmVjdGlvbkFuZ2xlIiwiYXRhbjIiLCJhYnMiLCJ3aWR0aCIsImhhbGZXIiwiZ2VuZXJhdGVYIiwicmlnaHRNb21lbnRBcnJvdyIsImRpcmVjdGlvbkFycm93Iiwid2luZG93IiwiQ3VydmVkQXJyb3ciLCJjcmVhdGVQb2xhciIsIlBJIiwibGVmdE1vbWVudEFycm93IiwiY3JlYXRlU3RyYWlnaHQiLCJ0b3AiLCJoZWlnaHQiLCJ3aGVlbFJhZGl1cyIsImxlZnQiLCJyaWdodCIsImJvdHRvbSIsImdldEZsRm9yZWdyb3VuZFN0eWxlIiwiZ2V0Rm9yZWdyb3VuZFN0eWxlIiwiZ2V0UmxGb3JlZ3JvdW5kU3R5bGUiLCJnZXRSckZvcmVncm91bmRTdHlsZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFB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QkFBQWxDLEtBQUFFLEtBR1FGLEtBQUFtQyxxQkFBQSx1Q0FJUm5DLEtBQUFvQyxxQkFBQSx1Q0FJUXBDLEtBQUFrQyxtQkFBQSxDQUFBL0QiLCJmaWxlIjoibWVjYW51bS1kcml2ZWJhc2UuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQ5MSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJpb3Q7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYXNzZXRzL21lZGlhL21lY2FudW0tZHJpdmViYXNlLnBuZ1wiOyIsImltcG9ydCAnLi9tZWNhbnVtLWRyaXZlYmFzZS50YWcnO1xuaW1wb3J0IGltYWdlIGZyb20gJy4vbWVjYW51bS1kcml2ZWJhc2UucG5nJztcblxuZGFzaGJvYXJkLnJlZ2lzdGVyV2lkZ2V0KCdtZWNhbnVtLWRyaXZlYmFzZScsIHtcbiAgbGFiZWw6ICdNZWNhbnVtIERyaXZlYmFzZScsXG4gIGNhdGVnb3J5OiAnQmFzaWMnLFxuICBhY2NlcHRlZFR5cGVzOiBbJ01lY2FudW1Ecml2ZSddLFxuICBpbWFnZSxcbiAgbWluWDogNyxcbiAgbWluWTogNVxufSk7IiwiPHNjcmlwdD5cbiAgICAvKiogXG4gICAgKiBDb3B5cmlnaHQgKGMpIDIwMTctMjAxOCBGSVJTVFxuICAgICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAgICAqXG4gICAgKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbiAgICAqIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuICAgICogICAgICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHRcbiAgICAqICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAgICAqICAgICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4gICAgKiAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXG4gICAgKiAgICAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICAgICogICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiBGSVJTVCBub3IgdGhlXG4gICAgKiAgICAgICBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0c1xuICAgICogICAgICAgZGVyaXZlZCBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4gICAgKlxuICAgICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBGSVJTVCBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIiBBTkQgQU5ZXG4gICAgKiBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEXG4gICAgKiBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBOT05JTkZSSU5HRU1FTlQgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBcbiAgICAqIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIEZJUlNUIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIFxuICAgICogQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTXG4gICAgKiAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7XG4gICAgKiBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkRcbiAgICAqIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4gICAgKiAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJU1xuICAgICogU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4gICAgKi9cbjwvc2NyaXB0PlxuXG48bWVjYW51bS1kcml2ZWJhc2U+XG4gICAgPGRpdiBjbGFzcz1cImRpZmYtZHJpdmUtY29udGFpbmVyXCI+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cInNwZWVkLXBhaXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGVlZFwiPlxuICAgICAgICAgICAgICAgIDxheGlzIHRpY2tzPVwiNVwiIHZlcnRpY2FsPXt0cnVlfSByYW5nZT17Wy0xLCAxXX0gLz5cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj1cImJhclwiIGNsYXNzPVwiYmFyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JlZ3JvdW5kXCIgc3R5bGU9e2dldEZsRm9yZWdyb3VuZFN0eWxlKCl9PjwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3BlZWRcIj5cbiAgICAgICAgICAgICAgICA8YXhpcyB0aWNrcz1cIjVcIiB2ZXJ0aWNhbD17dHJ1ZX0gcmFuZ2U9e1stMSwgMV19IC8+XG4gICAgICAgICAgICAgICAgPGRpdiByZWY9XCJiYXJcIiBjbGFzcz1cImJhclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9yZWdyb3VuZFwiIHN0eWxlPXtnZXRSbEZvcmVncm91bmRTdHlsZSgpfT48L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHN2ZyByZWY9XCJzdmdcIiB3aWR0aD1cIjI1MFwiIGhlaWdodD1cIjI1MFwiPlxuICAgICAgICAgICAgPGcgcmVmPVwiZm9yY2VWZWN0b3JcIj48L2c+XG4gICAgICAgICAgICA8ZyByZWY9XCJkcml2ZXRyYWluXCIgY2xhc3M9XCJkcml2ZXRyYWluXCI+PC9nPlxuICAgICAgICA8L3N2Zz5cblxuICAgICAgICA8ZGl2IGNsYXNzPVwic3BlZWQtcGFpclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNwZWVkXCI+XG4gICAgICAgICAgICAgICAgPGF4aXMgdGlja3M9XCI1XCIgdmVydGljYWw9e3RydWV9IHJhbmdlPXtbLTEsIDFdfSAvPlxuICAgICAgICAgICAgICAgIDxkaXYgcmVmPVwiYmFyXCIgY2xhc3M9XCJiYXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcmVncm91bmRcIiBzdHlsZT17Z2V0RnJGb3JlZ3JvdW5kU3R5bGUoKX0+PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzcGVlZFwiPlxuICAgICAgICAgICAgICAgIDxheGlzIHRpY2tzPVwiNVwiIHZlcnRpY2FsPXt0cnVlfSByYW5nZT17Wy0xLCAxXX0gLz5cbiAgICAgICAgICAgICAgICA8ZGl2IHJlZj1cImJhclwiIGNsYXNzPVwiYmFyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JlZ3JvdW5kXCIgc3R5bGU9e2dldFJyRm9yZWdyb3VuZFN0eWxlKCl9PjwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPHN0eWxlPlxuXG4gICAgICAgIC5kaWZmLWRyaXZlLWNvbnRhaW5lciB7XG4gICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHN2ZyAueCB7XG4gICAgICAgICAgICBzdHJva2U6IHJnYig1MCw1MCwyNTUpO1xuICAgICAgICAgICAgc3Ryb2tlLXdpZHRoOiAyO1xuICAgICAgICB9XG5cbiAgICAgICAgc3ZnIC5hcnJvdyBsaW5lLCBzdmcgLmFycm93IHBhdGgge1xuICAgICAgICAgICAgc3Ryb2tlOiByZ2IoNTAsNTAsMjU1KTtcbiAgICAgICAgICAgIHN0cm9rZS13aWR0aDogMjtcbiAgICAgICAgICAgIGZpbGw6IG5vbmU7XG4gICAgICAgICAgICAvKnRyYW5zZm9ybTogcm90YXRlKC05MGRlZyk7Ki9cbiAgICAgICAgfVxuXG4gICAgICAgIHN2ZyAuYXJyb3cgcG9seWdvbiB7XG4gICAgICAgICAgICBzdHJva2U6IHJnYig1MCw1MCwyNTUpO1xuICAgICAgICAgICAgZmlsbDogcmdiKDUwLDUwLDI1NSk7XG4gICAgICAgIH1cblxuICAgICAgICBzdmcgLmRyaXZldHJhaW4ge1xuICAgICAgICAgICAgZmlsbDogbm9uZTtcbiAgICAgICAgICAgIHN0cm9rZTogYmxhY2s7XG4gICAgICAgIH1cblxuICAgICAgICAuYmFyIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gMjVweCk7XG4gICAgICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgICAgIG1hcmdpbjogMTVweCAwO1xuICAgICAgICAgICAgYmFja2dyb3VuZDogI0RERDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5zcGVlZCB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgaGVpZ2h0OiA0NSU7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAzMHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgYXhpcyB7XG4gICAgICAgICAgICB3aWR0aDogMTBweDtcbiAgICAgICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gMzBweCk7XG4gICAgICAgIH1cblxuICAgICAgICAuZm9yZWdyb3VuZCB7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpZ2h0Ymx1ZTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgfVxuICAgICAgIFxuICAgIDwvc3R5bGU+XG4gICAgPHNjcmlwdD5cblxuICAgICAgICB0aGlzLmZsID0gMDtcbiAgICAgICAgdGhpcy5mciA9IDA7XG4gICAgICAgIHRoaXMucmwgPSAwO1xuICAgICAgICB0aGlzLnJyID0gMDtcblxuICAgICAgICB0aGlzLmRyYXdNb3Rpb25WZWN0b3IgPSAoZmwsIGZyLCBybCwgcnIpID0+IHtcblxuICAgICAgICAgICAgY29uc3QgdmVjdG9yUmFkaXVzID0gNjA7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSB7XG4gICAgICAgICAgICAgICAgeDogKGZsIC0gZnIgLSBybCArIHJyKSAvIDQsXG4gICAgICAgICAgICAgICAgeTogKGZsICsgZnIgKyBybCArIHJyKSAvIDRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBtb21lbnQgPSAoLWZsICsgZnIgLSBybCArIHJyKSAvIDQ7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3Rpb25NYWduaXR1ZGUgPSBNYXRoLmh5cG90KGRpcmVjdGlvbi54LCBkaXJlY3Rpb24ueSk7XG4gICAgICAgICAgICBjb25zdCBkaXJlY3Rpb25BbmdsZSA9IE1hdGguYXRhbjIoZGlyZWN0aW9uLnksIGRpcmVjdGlvbi54KTtcblxuICAgICAgICAgICAgLy8gQmFyZWx5IG1vdmluZywgZHJhdyBhbiBYXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMobW9tZW50KSA8PSAwLjAxICYmIGRpcmVjdGlvbk1hZ25pdHVkZSA8PSAwLjAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlWCgyNSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCByaWdodE1vbWVudEFycm93ID0gJyc7XG4gICAgICAgICAgICBsZXQgbGVmdE1vbWVudEFycm93ID0gJyc7XG4gICAgICAgICAgICBsZXQgZGlyZWN0aW9uQXJyb3cgPSAnJztcblxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKG1vbWVudCkgPiAwLjAxKSB7XG4gICAgICAgICAgICAgICAgLy8gT25seSBkcmF3IHRoZSBtb21lbnQgdmVjdG9ycyBpZiB0aGUgbW9tZW50IGlzIHNpZ25pZmljYW50IGVub3VnaFxuICAgICAgICAgICAgICAgIHJpZ2h0TW9tZW50QXJyb3cgPSB3aW5kb3cuZGFzaGJvYXJkLkN1cnZlZEFycm93LmNyZWF0ZVBvbGFyKDAsIHZlY3RvclJhZGl1cywgLW1vbWVudCAqIE1hdGguUEksIDAsIDgpO1xuICAgICAgICAgICAgICAgIGxlZnRNb21lbnRBcnJvdyA9IHdpbmRvdy5kYXNoYm9hcmQuQ3VydmVkQXJyb3cuY3JlYXRlUG9sYXIoTWF0aC5QSSwgdmVjdG9yUmFkaXVzLCAtbW9tZW50ICogTWF0aC5QSSwgMCwgOCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uTWFnbml0dWRlID4gMC4wMSkge1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgZHJhdyB0aGUgZGlyZWN0aW9uIHZlY3RvciBpZiBpdCdkIGJlIGxvbmcgZW5vdWdoXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uQXJyb3cgPSB3aW5kb3cuZGFzaGJvYXJkLkN1cnZlZEFycm93LmNyZWF0ZVN0cmFpZ2h0KGRpcmVjdGlvbk1hZ25pdHVkZSAqIHZlY3RvclJhZGl1cywgLWRpcmVjdGlvbkFuZ2xlLCAwLCA4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBgPGcgY2xhc3M9XCJhcnJvd1wiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgxMjUsIDEyNSlcIj4ke3JpZ2h0TW9tZW50QXJyb3d9ICR7bGVmdE1vbWVudEFycm93fSAke2RpcmVjdGlvbkFycm93fTwvZz5gO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVgod2lkdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbGZXID0gd2lkdGggLyAyO1xuICAgICAgICAgICAgY29uc3QgbGluZUEgPSBgPGxpbmUgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgxPVwiJHstaGFsZld9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTE9XCIkey1oYWxmV31cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Mj1cIiR7aGFsZld9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTI9XCIke2hhbGZXfVwiLz5gXG5cbiAgICAgICAgICAgIGNvbnN0IGxpbmVCID0gYDxsaW5lIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4MT1cIiR7LWhhbGZXfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkxPVwiJHtoYWxmV31cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Mj1cIiR7aGFsZld9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTI9XCIkey1oYWxmV31cIi8+YFxuXG4gICAgICAgICAgICByZXR1cm4gYDxnIGNsYXNzPVwieFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgxMjUsIDEyNSlcIj4ke2xpbmVBfSAke2xpbmVCfTwvZz5gO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kcmF3RHJpdmV0cmFpbiA9ICh3aWR0aCwgaGVpZ2h0LCB3aGVlbFJhZGl1cykgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gKDI1MCAtIHdpZHRoKSAvIDI7XG4gICAgICAgICAgICBjb25zdCB0b3AgPSAoMjUwIC0gaGVpZ2h0KSAvIDI7XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IGxlZnQgKyB3aWR0aDtcbiAgICAgICAgICAgIGNvbnN0IGJvdHRvbSA9IHRvcCArIGhlaWdodDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYmFzZSA9IGA8cmVjdCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIiR7d2lkdGh9XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiJHtoZWlnaHR9XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeD1cIiR7bGVmdH1cIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PVwiJHt0b3B9XCIgLz5gO1xuXG4gICAgICAgICAgICBjb25zdCB0bFdoZWVsID0gYDxyZWN0IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIiR7MzB9XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIiR7d2hlZWxSYWRpdXMgKiAyfVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4PVwiJHtsZWZ0IC0gMzB9XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9XCIke3RvcH1cIiAvPmA7XG5cbiAgICAgICAgICAgIGNvbnN0IHRyV2hlZWwgPSBgPHJlY3QgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiJHszMH1cIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiJHt3aGVlbFJhZGl1cyAqIDJ9XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg9XCIke3JpZ2h0fVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PVwiJHt0b3B9XCIgLz5gO1xuXG4gICAgICAgICAgICBjb25zdCBibFdoZWVsID0gYDxyZWN0IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIiR7MzB9XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIiR7d2hlZWxSYWRpdXMgKiAyfVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4PVwiJHtsZWZ0IC0gMzB9XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk9XCIke2JvdHRvbSAtIHdoZWVsUmFkaXVzICogMn1cIiAvPmA7XG5cbiAgICAgICAgICAgIGNvbnN0IGJyV2hlZWwgPSBgPHJlY3QgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiJHszMH1cIiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PVwiJHt3aGVlbFJhZGl1cyAqIDJ9XCIgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg9XCIke3JpZ2h0fVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5PVwiJHtib3R0b20gLSB3aGVlbFJhZGl1cyAqIDJ9XCIgLz5gO1xuXG4gICAgICAgICAgICByZXR1cm4gYmFzZSArIHRsV2hlZWwgKyB0cldoZWVsICsgYmxXaGVlbCArIGJyV2hlZWw7XG4gICAgICAgIH07XG5cblxuICAgICAgICB0aGlzLmdldEZsRm9yZWdyb3VuZFN0eWxlID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rm9yZWdyb3VuZFN0eWxlKHRoaXMuZmwpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0RnJGb3JlZ3JvdW5kU3R5bGUgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGb3JlZ3JvdW5kU3R5bGUodGhpcy5mcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRSbEZvcmVncm91bmRTdHlsZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZvcmVncm91bmRTdHlsZSh0aGlzLnJsKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldFJyRm9yZWdyb3VuZFN0eWxlID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rm9yZWdyb3VuZFN0eWxlKHRoaXMucnIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0Rm9yZWdyb3VuZFN0eWxlID0gKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtaW4gPSAtMTtcbiAgICAgICAgICAgIGNvbnN0IG1heCA9IDE7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSBNYXRoLmNsYW1wKHZhbHVlLCBtaW4sIG1heCk7XG5cbiAgICAgICAgICAgIGlmIChtYXggPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBNYXRoLmFicyh2YWwgLSBtYXgpIC8gKG1heCAtIG1pbikgKiAxMDAgKyAnJScsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICBib3R0b206IDBcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWluID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogTWF0aC5hYnModmFsIC0gbWluKSAvIChtYXggLSBtaW4pICogMTAwICsgJyUnLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogJ2F1dG8nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IE1hdGguYWJzKHZhbCkgLyAobWF4IC0gbWluKSAqIDEwMCArICclJyxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiBNYXRoLmFicyhtaW4pIC8gKG1heCAtIG1pbikgKiAxMDAgKyAnJScsXG4gICAgICAgICAgICAgICAgICAgIGJvdHRvbTogJ2F1dG8nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogTWF0aC5hYnModmFsKSAvIChtYXggLSBtaW4pICogMTAwICsgJyUnLFxuICAgICAgICAgICAgICAgICAgICB0b3A6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiBNYXRoLmFicyhtYXgpIC8gKG1heCAtIG1pbikgKiAxMDAgKyAnJSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5vbignbW91bnQnLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgZHJhd2luZyA9IHRoaXMuZHJhd01vdGlvblZlY3RvcigwLCAwLCAwLCAwKTtcbiAgICAgICAgICAgICQodGhpcy5yZWZzLmRyaXZldHJhaW4pLmh0bWwodGhpcy5kcmF3RHJpdmV0cmFpbigxNTAsIDIwMCwgMzUpKTtcbiAgICAgICAgICAgICQodGhpcy5yZWZzLmZvcmNlVmVjdG9yKS5odG1sKGRyYXdpbmcpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm9uKCd1cGRhdGUnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZsID0gdGhpcy5vcHRzLnRhYmxlWydGcm9udCBMZWZ0IE1vdG9yIFNwZWVkJ10gfHwgMDtcbiAgICAgICAgICAgIHRoaXMuZnIgPSB0aGlzLm9wdHMudGFibGVbJ0Zyb250IFJpZ2h0IE1vdG9yIFNwZWVkJ10gfHwgMDtcbiAgICAgICAgICAgIHRoaXMucmwgPSB0aGlzLm9wdHMudGFibGVbJ1JlYXIgTGVmdCBNb3RvciBTcGVlZCddIHx8IDA7XG4gICAgICAgICAgICB0aGlzLnJyID0gdGhpcy5vcHRzLnRhYmxlWydSZWFyIFJpZ2h0IE1vdG9yIFNwZWVkJ10gfHwgMDtcbiAgICAgICAgICAgIGxldCBkcmF3aW5nID0gdGhpcy5kcmF3TW90aW9uVmVjdG9yKHRoaXMuZmwsIHRoaXMuZnIsIHRoaXMucmwsIHRoaXMucnIpO1xuICAgICAgICAgICAgJCh0aGlzLnJlZnMuZm9yY2VWZWN0b3IpLmh0bWwoZHJhd2luZyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIFxuXG4gICAgPC9zY3JpcHQ+XG48L21lY2FudW0tZHJpdmViYXNlPiJdLCJzb3VyY2VSb290IjoiIn0=