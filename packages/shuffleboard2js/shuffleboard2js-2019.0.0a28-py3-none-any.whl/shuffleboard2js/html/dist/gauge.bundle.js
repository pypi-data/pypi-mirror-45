!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=478)}({1:function(e,t){e.exports=riot},172:function(e,t,n){e.exports=n(479)},173:function(e,t,n){e.exports=n.p+"assets/media/gauge.png"},478:function(e,t,n){e.exports=n(498)},479:function(e,t,n){var a,i,r;i="undefined"==typeof window?this:window,r=function(e,t){var n=e.document,a=Array.prototype.slice,i=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)};return function(){var e="http://www.w3.org/2000/svg",t={centerX:50,centerY:50},r={dialRadius:40,dialStartAngle:135,dialEndAngle:45,value:0,max:100,min:0,valueDialClass:"value",valueClass:"value-text",dialClass:"dial",gaugeClass:"gauge",showValue:!0,gaugeColor:null,label:function(e){return Math.round(e)}};function o(t,a,i){var r=n.createElementNS(e,t);for(var o in a)r.setAttribute(o,a[o]);return i&&i.forEach(function(e){r.appendChild(e)}),r}function s(e,t){return e*t/100}function u(e,t,n){var a=Number(e);return a>n?n:a<t?t:a}function l(e,t,n,a){var i=a*Math.PI/180;return{x:Math.round(1e3*(e+n*Math.cos(i)))/1e3,y:Math.round(1e3*(t+n*Math.sin(i)))/1e3}}return function(e,n){n=function(){var e=arguments[0];return a.call(arguments,1).forEach(function(t){for(k in t)t.hasOwnProperty(k)&&(e[k]=t[k])}),e}({},r,n);var g,c,d,f=e,p=n.max,m=n.min,h=u(n.value,m,p),v=n.dialRadius,b=n.showValue,x=n.dialStartAngle,y=n.dialEndAngle,w=n.valueDialClass,M=n.valueClass,C=(n.valueLabelClass,n.dialClass),A=n.gaugeClass,S=n.color,z=n.label,j=n.viewBox;if(x<y){console.log("WARN! startAngle < endAngle, Swapping");var O=x;x=y,y=O}function V(e,n,a,i){var r=function(e,n,a){var i=t.centerX,r=t.centerY;return{end:l(i,r,e,a),start:l(i,r,e,n)}}(e,n,a),o=r.start,s=r.end,u=void 0===i?1:i;return["M",o.x,o.y,"A",e,e,0,u,1,s.x,s.y].join(" ")}function P(e,t){var a=function(e,t,n){return 100*(e-t)/(n-t)}(e,m,p),i=s(a,360-Math.abs(x-y)),r=i<=180?0:1;b&&(g.textContent=z.call(n,e)),c.setAttribute("d",V(v,x,i+x,r))}function R(e,t){var n=S(e),a=1e3*t,i="stroke "+a+"ms ease";c.style=["stroke: "+n,"-webkit-transition: "+i,"-moz-transition: "+i,"transition: "+i].join(";")}return d={setMaxValue:function(e){p=e},setValue:function(e){h=u(e,m,p),S&&R(h,0),P(h)},setValueAnimated:function(e,t){var n=h;h=u(e,m,p),n!==h&&(S&&R(h,t),function(e){var t=e.duration,n=1,a=60*t,r=e.start||0,o=e.end-r,s=e.step,u=e.easing||function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)};i(function e(){var t=n/a,l=o*u(t)+r;s(l,n);n+=1;t<1&&i(e)})}({start:n||0,end:h,duration:t||1,step:function(e,t){P(e,t)}}))},getValue:function(){return h}},function(e){g=o("text",{x:50,y:50,fill:"#999",class:M,"font-size":"100%","font-family":"sans-serif","font-weight":"normal","text-anchor":"middle","alignment-baseline":"middle","dominant-baseline":"central"}),c=o("path",{class:w,fill:"none",stroke:"#666","stroke-width":2.5,d:V(v,x,x)});var t=s(100,360-Math.abs(x-y)),n=o("svg",{viewBox:j||"0 0 100 100",class:A},[o("path",{class:C,fill:"none",stroke:"#eee","stroke-width":2,d:V(v,x,y,t<=180?0:1)}),g,c]);e.appendChild(n)}(f),d.setValue(h),d}}()}(i),void 0===(a=function(){return r}.call(t,n,t,e))||(e.exports=a)},480:function(e,t,n){n(1).tag2("gauge-props",'<form> <div class="form-group row"> <label for="min" class="col-sm-4 col-form-label text-right">Min</label> <div class="col-sm-8"> <input class="form-control" id="min" riot-value="{opts.properties.min}" onchange="{onMinChange}" type="{\'number\'}"> </div> </div> <div class="form-group row"> <label for="max" class="col-sm-4 col-form-label text-right">Max</label> <div class="col-sm-8"> <input class="form-control" id="max" riot-value="{opts.properties.max}" onchange="{onMaxChange}" type="{\'number\'}"> </div> </div> </form>',"","",function(e){this.onMinChange=(e=>{const t=parseFloat(e.target.value);this.opts.properties.min=t,t>this.opts.properties.max&&(this.opts.properties.max=t)}),this.onMaxChange=(e=>{const t=parseFloat(e.target.value);this.opts.properties.max=t,t<this.opts.properties.min&&(this.opts.properties.min=t)})})},498:function(e,t,n){"use strict";n.r(t);var a=n(172),i=n.n(a);n(1).tag2("gauge",'<div class="gauge-container-container"> <div ref="gauge" class="gauge-container {opts.properties.style}"></div> </div>','gauge .gauge-container-container,[data-is="gauge"] .gauge-container-container{ height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; } gauge .gauge-container,[data-is="gauge"] .gauge-container{ display: block; padding: 10px; } gauge .gauge-container > .gauge > .dial,[data-is="gauge"] .gauge-container > .gauge > .dial{ stroke: #ddd; stroke-width: 3; fill: rgba(0,0,0,0); } gauge .gauge-container > .gauge > .value,[data-is="gauge"] .gauge-container > .gauge > .value{ stroke: rgb(47, 180, 200); stroke-width: 3; fill: rgba(0,0,0,0); } gauge .gauge-container > .gauge > .value-text,[data-is="gauge"] .gauge-container > .gauge > .value-text{ fill: black; font-family: sans-serif; font-size: 1em; }',"",function(e){this.gauge=null,this.on("mount",()=>{this.initialize()}),this.setSize=(()=>{const e=this.root.getBoundingClientRect(),t=e.width,n=e.height,a=Math.min(t,n);$(this.refs.gauge).css("width",a+"px")}),this.initialize=(()=>{$(this.refs.gauge).html(""),this.gauge=i()(this.refs.gauge,{min:this.opts.properties.min,max:this.opts.properties.max,value:0}),this.setSize()}),this.on("propertiesUpdate",()=>{this.initialize()}),this.on("resize",()=>{this.setSize()}),this.on("update",()=>{this.gauge&&"number"==typeof this.opts.table&&this.gauge.setValue(this.opts.table)})});n(480);var r=n(173),o=n.n(r);dashboard.registerWidget("gauge",{label:"Gauge",category:"Basic",acceptedTypes:["number"],image:o.a,minX:3,minY:2,properties:{tag:"gauge-props",defaults:{min:0,max:100}}})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicmlvdFwiIiwid2VicGFjazovLy8uLi9ub2RlX21vZHVsZXMvc3ZnLWdhdWdlL2luZGV4LmpzIiwid2VicGFjazovLy8uL3dpZGdldHMvZ2F1Z2UvZ2F1Z2UucG5nIiwid2VicGFjazovLy8uLi9ub2RlX21vZHVsZXMvc3ZnLWdhdWdlL3NyYy9nYXVnZS5qcyIsIndlYnBhY2s6Ly8vLi93aWRnZXRzL2dhdWdlL2dhdWdlLXByb3BzLnRhZyIsIndlYnBhY2s6Ly8vLi93aWRnZXRzL2dhdWdlL2dhdWdlLnRhZyIsIndlYnBhY2s6Ly8vLi93aWRnZXRzL2dhdWdlL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmlvdCIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwiZ2xvYmFsIiwiR2F1Z2UiLCJ3aW5kb3ciLCJ0aGlzIiwidW5kZWZpbmVkIiwiZG9jdW1lbnQiLCJzbGljZSIsIkFycmF5IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYiIsInNldFRpbWVvdXQiLCJTVkdfTlMiLCJHYXVnZURlZmF1bHRzIiwiY2VudGVyWCIsImNlbnRlclkiLCJkZWZhdWx0T3B0aW9ucyIsImRpYWxSYWRpdXMiLCJkaWFsU3RhcnRBbmdsZSIsImRpYWxFbmRBbmdsZSIsIm1heCIsIm1pbiIsInZhbHVlRGlhbENsYXNzIiwidmFsdWVDbGFzcyIsImRpYWxDbGFzcyIsImdhdWdlQ2xhc3MiLCJzaG93VmFsdWUiLCJnYXVnZUNvbG9yIiwibGFiZWwiLCJ2YWwiLCJNYXRoIiwicm91bmQiLCJzdmciLCJhdHRycyIsImNoaWxkcmVuIiwiZWxlbSIsImNyZWF0ZUVsZW1lbnROUyIsImF0dHJOYW1lIiwic2V0QXR0cmlidXRlIiwiZm9yRWFjaCIsImFwcGVuZENoaWxkIiwiZ2V0QW5nbGUiLCJwZXJjZW50YWdlIiwiZ2F1Z2VTcGFuQW5nbGUiLCJub3JtYWxpemUiLCJsaW1pdCIsIk51bWJlciIsImdldENhcnRlc2lhbiIsImN4IiwiY3kiLCJyYWRpdXMiLCJhbmdsZSIsInJhZCIsIlBJIiwieCIsImNvcyIsInkiLCJzaW4iLCJvcHRzIiwidGFyZ2V0IiwiYXJndW1lbnRzIiwiayIsInNoYWxsb3dDb3B5IiwiZ2F1Z2VWYWx1ZUVsZW0iLCJnYXVnZVZhbHVlUGF0aCIsImluc3RhbmNlIiwiZ2F1Z2VDb250YWluZXIiLCJkaXNwbGF5VmFsdWUiLCJzdGFydEFuZ2xlIiwiZW5kQW5nbGUiLCJ2YWx1ZVRleHRDbGFzcyIsInZhbHVlTGFiZWxDbGFzcyIsImNvbG9yIiwidmlld0JveCIsImNvbnNvbGUiLCJsb2ciLCJ0bXAiLCJwYXRoU3RyaW5nIiwibGFyZ2VBcmMiLCJjb29yZHMiLCJlbmQiLCJzdGFydCIsImdldERpYWxDb29yZHMiLCJsYXJnZUFyY0ZsYWciLCJqb2luIiwidXBkYXRlR2F1Z2UiLCJ0aGVWYWx1ZSIsImZyYW1lIiwiZ2V0VmFsdWVJblBlcmNlbnRhZ2UiLCJhYnMiLCJmbGFnIiwidGV4dENvbnRlbnQiLCJzZXRHYXVnZUNvbG9yIiwiZHVyYXRpb24iLCJkdXIiLCJwYXRoVHJhbnNpdGlvbiIsInN0eWxlIiwic2V0TWF4VmFsdWUiLCJzZXRWYWx1ZSIsInNldFZhbHVlQW5pbWF0ZWQiLCJvbGRWYWwiLCJvcHRpb25zIiwiY3VycmVudEl0ZXJhdGlvbiIsIml0ZXJhdGlvbnMiLCJjaGFuZ2UiLCJzdGVwIiwiZWFzaW5nIiwicG9zIiwicG93IiwiYW5pbWF0ZSIsInByb2dyZXNzIiwiQW5pbWF0aW9uIiwiZ2V0VmFsdWUiLCJmaWxsIiwiY2xhc3MiLCJmb250LXNpemUiLCJmb250LWZhbWlseSIsImZvbnQtd2VpZ2h0IiwidGV4dC1hbmNob3IiLCJhbGlnbm1lbnQtYmFzZWxpbmUiLCJkb21pbmFudC1iYXNlbGluZSIsInN0cm9rZSIsInN0cm9rZS13aWR0aCIsImdhdWdlRWxlbWVudCIsImluaXRpYWxpemVHYXVnZSIsImZhY3RvcnkiLCJ0YWcyIiwib25NaW5DaGFuZ2UiLCJldiIsInBhcnNlRmxvYXQiLCJwcm9wZXJ0aWVzIiwiZ2F1Z2UiLCJvbiIsImluaXRpYWxpemUiLCJzZXRTaXplIiwicmVjdCIsInJvb3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJzdmdXaWR0aCIsIndpZHRoIiwic3ZnSGVpZ2h0IiwiaGVpZ2h0Iiwic2l6ZSIsInN2Z19nYXVnZV9kZWZhdWx0IiwicmVmcyIsImRhc2hib2FyZCIsInJlZ2lzdGVyV2lkZ2V0IiwiY2F0ZWdvcnkiLCJhY2NlcHRlZFR5cGVzIiwiaW1hZ2UiLCJtaW5YIiwibWluWSIsInRhZyIsImRlZmF1bHRzIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVB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QUFLLGNBQ0xDLFNBQVUsQ0FDUnBJLElBQUssRUFDTEQsSUFBSyIsImZpbGUiOiJnYXVnZS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNDc4KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmlvdDsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL3NyYy9nYXVnZVwiKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImFzc2V0cy9tZWRpYS9nYXVnZS5wbmdcIjsiLCIvKiBnbG9iYWwgd2luZG93LCBkZWZpbmUsIG1vZHVsZSAqL1xuKGZ1bmN0aW9uKGdsb2JhbCwgZmFjdG9yeSkge1xuICB2YXIgR2F1Z2UgPSBmYWN0b3J5KGdsb2JhbCk7XG4gIGlmKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1EIHN1cHBvcnRcbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7cmV0dXJuIEdhdWdlO30pO1xuICB9ZWxzZSBpZih0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgLy8gQ29tbW9uSlMgc3VwcG9ydFxuICAgIG1vZHVsZS5leHBvcnRzID0gR2F1Z2U7XG4gIH1lbHNlIHtcbiAgICAvLyBXZSBhcmUgcHJvYmFibHkgcnVubmluZyBpbiB0aGUgYnJvd3NlclxuICAgIGdsb2JhbC5HYXVnZSA9IEdhdWdlO1xuICB9XG59KSh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IHdpbmRvdywgZnVuY3Rpb24oZ2xvYmFsLCB1bmRlZmluZWQpIHtcblxuICB2YXIgZG9jdW1lbnQgPSBnbG9iYWwuZG9jdW1lbnQsXG4gICAgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UsXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gKGdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcbiAgICAgICAgZ2xvYmFsLm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICBnbG9iYWwud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgIGdsb2JhbC5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICBmdW5jdGlvbihjYikge1xuICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGNiLCAxMDAwIC8gNjApO1xuICAgICAgICB9KTtcblxuICAvLyBFWFBFUklNRU5UQUwhIVxuICAvKipcbiAgICogU2ltcGxpc3RpYyBhbmltYXRpb24gZnVuY3Rpb24gZm9yIGFuaW1hdGluZyB0aGUgZ2F1Z2UuIFRoYXQncyBhbGwhXG4gICAqIE9wdGlvbnMgYXJlOlxuICAgKiB7XG4gICAqICBkdXJhdGlvbjogMSwgICAgLy8gSW4gc2Vjb25kc1xuICAgKiAgc3RhcnQ6IDAsICAgICAgIC8vIFRoZSBzdGFydCB2YWx1ZVxuICAgKiAgZW5kOiAxMDAsICAgICAgIC8vIFRoZSBlbmQgdmFsdWVcbiAgICogIHN0ZXA6IGZ1bmN0aW9uLCAvLyBSRVFVSVJFRCEgVGhlIHN0ZXAgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIHBhc3NlZCB0aGUgdmFsdWUgYW5kIGRvZXMgc29tZXRoaW5nXG4gICAqICBlYXNpbmc6IGZ1bmN0aW9uIC8vIFRoZSBlYXNpbmcgZnVuY3Rpb24uIERlZmF1bHQgaXMgZWFzZUluT3V0Q3ViaWNcbiAgICogfVxuICAgKi9cbiAgZnVuY3Rpb24gQW5pbWF0aW9uKG9wdGlvbnMpIHtcbiAgICB2YXIgZHVyYXRpb24gPSBvcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICBjdXJyZW50SXRlcmF0aW9uID0gMSxcbiAgICAgICAgaXRlcmF0aW9ucyA9IDYwICogZHVyYXRpb24sXG4gICAgICAgIHN0YXJ0ID0gb3B0aW9ucy5zdGFydCB8fCAwLFxuICAgICAgICBlbmQgPSBvcHRpb25zLmVuZCxcbiAgICAgICAgY2hhbmdlID0gZW5kIC0gc3RhcnQsXG4gICAgICAgIHN0ZXAgPSBvcHRpb25zLnN0ZXAsXG4gICAgICAgIGVhc2luZyA9IG9wdGlvbnMuZWFzaW5nIHx8IGZ1bmN0aW9uIGVhc2VJbk91dEN1YmljKHBvcykge1xuICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kYW5yby9lYXNpbmctanMvYmxvYi9tYXN0ZXIvZWFzaW5nLmpzXG4gICAgICAgICAgaWYgKChwb3MvPTAuNSkgPCAxKSByZXR1cm4gMC41Kk1hdGgucG93KHBvcywzKTtcbiAgICAgICAgICByZXR1cm4gMC41ICogKE1hdGgucG93KChwb3MtMiksMykgKyAyKTtcbiAgICAgICAgfTtcblxuICAgIGZ1bmN0aW9uIGFuaW1hdGUoKSB7XG4gICAgICB2YXIgcHJvZ3Jlc3MgPSBjdXJyZW50SXRlcmF0aW9uIC8gaXRlcmF0aW9ucywgXG4gICAgICAgICAgdmFsdWUgPSBjaGFuZ2UgKiBlYXNpbmcocHJvZ3Jlc3MpICsgc3RhcnQ7XG4gICAgICAvLyBjb25zb2xlLmxvZyhwcm9ncmVzcyArIFwiLCBcIiArIHZhbHVlKTtcbiAgICAgIHN0ZXAodmFsdWUsIGN1cnJlbnRJdGVyYXRpb24pO1xuICAgICAgY3VycmVudEl0ZXJhdGlvbiArPSAxO1xuXG4gICAgICBpZihwcm9ncmVzcyA8IDEpIHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBzdGFydCFcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gIH1cblxuXG5cbiAgdmFyIEdhdWdlID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBTVkdfTlMgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI7XG5cbiAgICB2YXIgR2F1Z2VEZWZhdWx0cyA9IHtcbiAgICAgIGNlbnRlclg6IDUwLFxuICAgICAgY2VudGVyWTogNTBcbiAgICB9O1xuXG4gICAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgZGlhbFJhZGl1czogNDAsXG4gICAgICBkaWFsU3RhcnRBbmdsZTogMTM1LFxuICAgICAgZGlhbEVuZEFuZ2xlOiA0NSxcbiAgICAgIHZhbHVlOiAwLFxuICAgICAgbWF4OiAxMDAsXG4gICAgICBtaW46IDAsXG4gICAgICB2YWx1ZURpYWxDbGFzczogXCJ2YWx1ZVwiLFxuICAgICAgdmFsdWVDbGFzczogXCJ2YWx1ZS10ZXh0XCIsXG4gICAgICBkaWFsQ2xhc3M6IFwiZGlhbFwiLFxuICAgICAgZ2F1Z2VDbGFzczogXCJnYXVnZVwiLFxuICAgICAgc2hvd1ZhbHVlOiB0cnVlLFxuICAgICAgZ2F1Z2VDb2xvcjogbnVsbCxcbiAgICAgIGxhYmVsOiBmdW5jdGlvbih2YWwpIHtyZXR1cm4gTWF0aC5yb3VuZCh2YWwpO31cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2hhbGxvd0NvcHkoLyogc291cmNlLCAuLi50YXJnZXRzKi8pIHtcbiAgICAgIHZhciB0YXJnZXQgPSBhcmd1bWVudHNbMF0sIHNvdXJjZXMgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24ocykge1xuICAgICAgICBmb3IoayBpbiBzKSB7XG4gICAgICAgICAgaWYocy5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgICAgdGFyZ2V0W2tdID0gc1trXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIHV0aWxpdHkgZnVuY3Rpb24gdG8gY3JlYXRlIFNWRyBkb20gdHJlZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIFRoZSBTVkcgZWxlbWVudCBuYW1lXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGF0dHJzIFRoZSBhdHRyaWJ1dGVzIGFzIHRoZXkgYXBwZWFyIGluIERPTSBlLmcuIHN0cm9rZS13aWR0aCBhbmQgbm90IHN0cm9rZVdpZHRoXG4gICAgICogQHBhcmFtIHtBcnJheX0gY2hpbGRyZW4gQW4gYXJyYXkgb2YgY2hpbGRyZW4gKGNhbiBiZSBjcmVhdGVkIGJ5IHRoaXMgc2FtZSBmdW5jdGlvbilcbiAgICAgKiBAcmV0dXJuIFRoZSBTVkcgZWxlbWVudFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHN2ZyhuYW1lLCBhdHRycywgY2hpbGRyZW4pIHtcbiAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFNWR19OUywgbmFtZSk7XG4gICAgICBmb3IodmFyIGF0dHJOYW1lIGluIGF0dHJzKSB7XG4gICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBhdHRyc1thdHRyTmFtZV0pO1xuICAgICAgfVxuXG4gICAgICBpZihjaGlsZHJlbikge1xuICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgICBlbGVtLmFwcGVuZENoaWxkKGMpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbGVtO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZXMgcGVyY2VudGFnZSB2YWx1ZSB0byBhbmdsZS4gZS5nLiBJZiBnYXVnZSBzcGFuIGFuZ2xlIGlzIDE4MGRlZywgdGhlbiA1MCVcbiAgICAgKiB3aWxsIGJlIDkwZGVnXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0QW5nbGUocGVyY2VudGFnZSwgZ2F1Z2VTcGFuQW5nbGUpIHtcbiAgICAgIHJldHVybiBwZXJjZW50YWdlICogZ2F1Z2VTcGFuQW5nbGUgLyAxMDA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplKHZhbHVlLCBtaW4sIGxpbWl0KSB7XG4gICAgICB2YXIgdmFsID0gTnVtYmVyKHZhbHVlKTtcbiAgICAgIGlmKHZhbCA+IGxpbWl0KSByZXR1cm4gbGltaXQ7XG4gICAgICBpZih2YWwgPCBtaW4pIHJldHVybiBtaW47XG4gICAgICByZXR1cm4gdmFsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFZhbHVlSW5QZXJjZW50YWdlKHZhbHVlLCBtaW4sIG1heCkge1xuICAgICAgdmFyIG5ld01heCA9IG1heCAtIG1pbiwgbmV3VmFsID0gdmFsdWUgLSBtaW47XG4gICAgICByZXR1cm4gMTAwICogbmV3VmFsIC8gbmV3TWF4O1xuICAgICAgLy8gdmFyIGFic01pbiA9IE1hdGguYWJzKG1pbik7XG4gICAgICAvLyByZXR1cm4gMTAwICogKGFic01pbiArIHZhbHVlKSAvIChtYXggKyBhYnNNaW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgY2FydGVzaWFuIGNvLW9yZGluYXRlcyBmb3IgYSBzcGVjaWZpZWQgcmFkaXVzIGFuZCBhbmdsZSAoaW4gZGVncmVlcylcbiAgICAgKiBAcGFyYW0gY3gge051bWJlcn0gVGhlIGNlbnRlciB4IGNvLW9yaWluYXRlXG4gICAgICogQHBhcmFtIGN5IHtOdW1iZXJ9IFRoZSBjZW50ZXIgeSBjby1vcmRpbmF0ZVxuICAgICAqIEBwYXJhbSByYWRpdXMge051bWJlcn0gVGhlIHJhZGl1cyBvZiB0aGUgY2lyY2xlXG4gICAgICogQHBhcmFtIGFuZ2xlIHtOdW1iZXJ9IFRoZSBhbmdsZSBpbiBkZWdyZWVzXG4gICAgICogQHJldHVybiBBbiBvYmplY3Qgd2l0aCB4LHkgY28tb3JkaW5hdGVzXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0Q2FydGVzaWFuKGN4LCBjeSwgcmFkaXVzLCBhbmdsZSkge1xuICAgICAgdmFyIHJhZCA9IGFuZ2xlICogTWF0aC5QSSAvIDE4MDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHg6IE1hdGgucm91bmQoKGN4ICsgcmFkaXVzICogTWF0aC5jb3MocmFkKSkgKiAxMDAwKSAvIDEwMDAsXG4gICAgICAgIHk6IE1hdGgucm91bmQoKGN5ICsgcmFkaXVzICogTWF0aC5zaW4ocmFkKSkgKiAxMDAwKSAvIDEwMDBcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gUmV0dXJucyBzdGFydCBhbmQgZW5kIHBvaW50cyBmb3IgZGlhbFxuICAgIC8vIGkuZS4gc3RhcnRzIGF0IDEzNWRlZyBlbmRzIGF0IDQ1ZGVnIHdpdGggbGFyZ2UgYXJjIGZsYWdcbiAgICAvLyBSRU1FTUJFUiEhIGFuZ2xlPTAgc3RhcnRzIG9uIFggYXhpcyBhbmQgdGhlbiBpbmNyZWFzZXMgY2xvY2t3aXNlXG4gICAgZnVuY3Rpb24gZ2V0RGlhbENvb3JkcyhyYWRpdXMsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlKSB7XG4gICAgICB2YXIgY3ggPSBHYXVnZURlZmF1bHRzLmNlbnRlclgsXG4gICAgICAgICAgY3kgPSBHYXVnZURlZmF1bHRzLmNlbnRlclk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBlbmQ6IGdldENhcnRlc2lhbihjeCwgY3ksIHJhZGl1cywgZW5kQW5nbGUpLFxuICAgICAgXHRzdGFydDogZ2V0Q2FydGVzaWFuKGN4LCBjeSwgcmFkaXVzLCBzdGFydEFuZ2xlKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgR2F1Z2Ugb2JqZWN0LiBUaGlzIHNob3VsZCBiZSBjYWxsZWQgd2l0aG91dCB0aGUgJ25ldycgb3BlcmF0b3IuIFZhcmlvdXMgb3B0aW9uc1xuICAgICAqIGNhbiBiZSBwYXNzZWQgZm9yIHRoZSBnYXVnZTpcbiAgICAgKiB7XG4gICAgICogICAgZGlhbFN0YXJ0QW5nbGU6IFRoZSBhbmdsZSB0byBzdGFydCB0aGUgZGlhbC4gTVVTVCBiZSBncmVhdGVyIHRoYW4gZGlhbEVuZEFuZ2xlLiBEZWZhdWx0IDEzNWRlZ1xuICAgICAqICAgIGRpYWxFbmRBbmdsZTogVGhlIGFuZ2xlIHRvIGVuZCB0aGUgZGlhbC4gRGVmYXVsdCA0NWRlZ1xuICAgICAqICAgIHJhZGl1czogVGhlIGdhdWdlJ3MgcmFkaXVzLiBEZWZhdWx0IDQwMFxuICAgICAqICAgIG1heDogVGhlIG1heGltdW0gdmFsdWUgb2YgdGhlIGdhdWdlLiBEZWZhdWx0IDEwMFxuICAgICAqICAgIHZhbHVlOiBUaGUgc3RhcnRpbmcgdmFsdWUgb2YgdGhlIGdhdWdlLiBEZWZhdWx0IDBcbiAgICAgKiAgICBsYWJlbDogVGhlIGZ1bmN0aW9uIG9uIGhvdyB0byByZW5kZXIgdGhlIGNlbnRlciBsYWJlbCAoU2hvdWxkIHJldHVybiBhIHZhbHVlKVxuICAgICAqIH1cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW0gVGhlIERPTSBpbnRvIHdoaWNoIHRvIHJlbmRlciB0aGUgZ2F1Z2VcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyBUaGUgZ2F1Z2Ugb3B0aW9uc1xuICAgICAqIEByZXR1cm4gYSBHYXVnZSBvYmplY3RcbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gR2F1Z2UoZWxlbSwgb3B0cykge1xuICAgICAgb3B0cyA9IHNoYWxsb3dDb3B5KHt9LCBkZWZhdWx0T3B0aW9ucywgb3B0cyk7XG4gICAgICB2YXIgZ2F1Z2VDb250YWluZXIgPSBlbGVtLFxuICAgICAgICAgIGxpbWl0ID0gb3B0cy5tYXgsXG4gICAgICAgICAgbWluID0gb3B0cy5taW4sXG4gICAgICAgICAgdmFsdWUgPSBub3JtYWxpemUob3B0cy52YWx1ZSwgbWluLCBsaW1pdCksXG4gICAgICAgICAgcmFkaXVzID0gb3B0cy5kaWFsUmFkaXVzLFxuICAgICAgICAgIGRpc3BsYXlWYWx1ZSA9IG9wdHMuc2hvd1ZhbHVlLFxuICAgICAgICAgIHN0YXJ0QW5nbGUgPSBvcHRzLmRpYWxTdGFydEFuZ2xlLFxuICAgICAgICAgIGVuZEFuZ2xlID0gb3B0cy5kaWFsRW5kQW5nbGUsXG4gICAgICAgICAgdmFsdWVEaWFsQ2xhc3MgPSBvcHRzLnZhbHVlRGlhbENsYXNzLFxuICAgICAgICAgIHZhbHVlVGV4dENsYXNzID0gb3B0cy52YWx1ZUNsYXNzLFxuICAgICAgICAgIHZhbHVlTGFiZWxDbGFzcyA9IG9wdHMudmFsdWVMYWJlbENsYXNzLFxuICAgICAgICAgIGRpYWxDbGFzcyA9IG9wdHMuZGlhbENsYXNzLFxuICAgICAgICAgIGdhdWdlQ2xhc3MgPSBvcHRzLmdhdWdlQ2xhc3MsXG4gICAgICAgICAgZ2F1Z2VDb2xvciA9IG9wdHMuY29sb3IsXG4gICAgICAgICAgZ2F1Z2VWYWx1ZUVsZW0sXG4gICAgICAgICAgZ2F1Z2VWYWx1ZVBhdGgsXG4gICAgICAgICAgbGFiZWwgPSBvcHRzLmxhYmVsLFxuICAgICAgICAgIHZpZXdCb3ggPSBvcHRzLnZpZXdCb3gsXG4gICAgICAgICAgaW5zdGFuY2U7XG5cbiAgICAgIGlmKHN0YXJ0QW5nbGUgPCBlbmRBbmdsZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIldBUk4hIHN0YXJ0QW5nbGUgPCBlbmRBbmdsZSwgU3dhcHBpbmdcIik7XG4gICAgICAgIHZhciB0bXAgPSBzdGFydEFuZ2xlO1xuICAgICAgICBzdGFydEFuZ2xlID0gZW5kQW5nbGU7XG4gICAgICAgIGVuZEFuZ2xlID0gdG1wO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwYXRoU3RyaW5nKHJhZGl1cywgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGxhcmdlQXJjKSB7XG4gICAgICAgIHZhciBjb29yZHMgPSBnZXREaWFsQ29vcmRzKHJhZGl1cywgc3RhcnRBbmdsZSwgZW5kQW5nbGUpLFxuICAgICAgICAgICAgc3RhcnQgPSBjb29yZHMuc3RhcnQsXG4gICAgICAgICAgICBlbmQgPSBjb29yZHMuZW5kLFxuICAgICAgICAgICAgbGFyZ2VBcmNGbGFnID0gdHlwZW9mKGxhcmdlQXJjKSA9PT0gXCJ1bmRlZmluZWRcIiA/IDEgOiBsYXJnZUFyYztcblxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIFwiTVwiLCBzdGFydC54LCBzdGFydC55LCBcbiAgICAgICAgICBcIkFcIiwgcmFkaXVzLCByYWRpdXMsIDAsIGxhcmdlQXJjRmxhZywgMSwgZW5kLngsIGVuZC55XG4gICAgICAgIF0uam9pbihcIiBcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVHYXVnZShlbGVtKSB7XG4gICAgICAgIGdhdWdlVmFsdWVFbGVtID0gc3ZnKFwidGV4dFwiLCB7XG4gICAgICAgICAgeDogNTAsXG4gICAgICAgICAgeTogNTAsXG4gICAgICAgICAgZmlsbDogXCIjOTk5XCIsXG4gICAgICAgICAgXCJjbGFzc1wiOiB2YWx1ZVRleHRDbGFzcyxcbiAgICAgICAgICBcImZvbnQtc2l6ZVwiOiBcIjEwMCVcIixcbiAgICAgICAgICBcImZvbnQtZmFtaWx5XCI6IFwic2Fucy1zZXJpZlwiLFxuICAgICAgICAgIFwiZm9udC13ZWlnaHRcIjogXCJub3JtYWxcIixcbiAgICAgICAgICBcInRleHQtYW5jaG9yXCI6IFwibWlkZGxlXCIsXG4gICAgICAgICAgXCJhbGlnbm1lbnQtYmFzZWxpbmVcIjogXCJtaWRkbGVcIixcbiAgICAgICAgICBcImRvbWluYW50LWJhc2VsaW5lXCI6IFwiY2VudHJhbFwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGdhdWdlVmFsdWVQYXRoID0gc3ZnKFwicGF0aFwiLCB7XG4gICAgICAgICAgXCJjbGFzc1wiOiB2YWx1ZURpYWxDbGFzcyxcbiAgICAgICAgICBmaWxsOiBcIm5vbmVcIixcbiAgICAgICAgICBzdHJva2U6IFwiIzY2NlwiLFxuICAgICAgICAgIFwic3Ryb2tlLXdpZHRoXCI6IDIuNSxcbiAgICAgICAgICBkOiBwYXRoU3RyaW5nKHJhZGl1cywgc3RhcnRBbmdsZSwgc3RhcnRBbmdsZSkgLy8gdmFsdWUgb2YgMFxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgYW5nbGUgPSBnZXRBbmdsZSgxMDAsIDM2MCAtIE1hdGguYWJzKHN0YXJ0QW5nbGUgLSBlbmRBbmdsZSkpO1xuICAgICAgICB2YXIgZmxhZyA9IGFuZ2xlIDw9IDE4MCA/IDAgOiAxO1xuICAgICAgICB2YXIgZ2F1Z2VFbGVtZW50ID0gc3ZnKFwic3ZnXCIsIHtcInZpZXdCb3hcIjogdmlld0JveCB8fCBcIjAgMCAxMDAgMTAwXCIsIFwiY2xhc3NcIjogZ2F1Z2VDbGFzc30sXG4gICAgICAgICAgW1xuICAgICAgICAgICAgc3ZnKFwicGF0aFwiLCB7XG4gICAgICAgICAgICAgIFwiY2xhc3NcIjogZGlhbENsYXNzLFxuICAgICAgICAgICAgICBmaWxsOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgc3Ryb2tlOiBcIiNlZWVcIixcbiAgICAgICAgICAgICAgXCJzdHJva2Utd2lkdGhcIjogMixcbiAgICAgICAgICAgICAgZDogcGF0aFN0cmluZyhyYWRpdXMsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCBmbGFnKVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBnYXVnZVZhbHVlRWxlbSxcbiAgICAgICAgICAgIGdhdWdlVmFsdWVQYXRoXG4gICAgICAgICAgXVxuICAgICAgICApO1xuICAgICAgICBlbGVtLmFwcGVuZENoaWxkKGdhdWdlRWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUdhdWdlKHRoZVZhbHVlLCBmcmFtZSkge1xuICAgICAgICB2YXIgdmFsID0gZ2V0VmFsdWVJblBlcmNlbnRhZ2UodGhlVmFsdWUsIG1pbiwgbGltaXQpLFxuICAgICAgICAgICAgLy8gYW5nbGUgPSBnZXRBbmdsZSh2YWwsIDM2MCAtIE1hdGguYWJzKGVuZEFuZ2xlIC0gc3RhcnRBbmdsZSkpLFxuICAgICAgICAgICAgYW5nbGUgPSBnZXRBbmdsZSh2YWwsIDM2MCAtIE1hdGguYWJzKHN0YXJ0QW5nbGUgLSBlbmRBbmdsZSkpLFxuICAgICAgICAgICAgLy8gdGhpcyBpcyBiZWNhdXNlIHdlIGFyZSB1c2luZyBhcmMgZ3JlYXRlciB0aGFuIDE4MGRlZ1xuICAgICAgICAgICAgZmxhZyA9IGFuZ2xlIDw9IDE4MCA/IDAgOiAxO1xuICAgICAgICBpZihkaXNwbGF5VmFsdWUpIHtcbiAgICAgICAgICBnYXVnZVZhbHVlRWxlbS50ZXh0Q29udGVudCA9IGxhYmVsLmNhbGwob3B0cywgdGhlVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGdhdWdlVmFsdWVQYXRoLnNldEF0dHJpYnV0ZShcImRcIiwgcGF0aFN0cmluZyhyYWRpdXMsIHN0YXJ0QW5nbGUsIGFuZ2xlICsgc3RhcnRBbmdsZSwgZmxhZykpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXRHYXVnZUNvbG9yKHZhbHVlLCBkdXJhdGlvbikgeyAgICAgICAgXG4gICAgICAgIHZhciBjID0gZ2F1Z2VDb2xvcih2YWx1ZSksIFxuICAgICAgICAgICAgZHVyID0gZHVyYXRpb24gKiAxMDAwLFxuICAgICAgICAgICAgcGF0aFRyYW5zaXRpb24gPSBcInN0cm9rZSBcIiArIGR1ciArIFwibXMgZWFzZVwiO1xuICAgICAgICAgICAgLy8gdGV4dFRyYW5zaXRpb24gPSBcImZpbGwgXCIgKyBkdXIgKyBcIm1zIGVhc2VcIjtcblxuICAgICAgICBnYXVnZVZhbHVlUGF0aC5zdHlsZSA9IFtcbiAgICAgICAgICBcInN0cm9rZTogXCIgKyBjLFxuICAgICAgICAgIFwiLXdlYmtpdC10cmFuc2l0aW9uOiBcIiArIHBhdGhUcmFuc2l0aW9uLFxuICAgICAgICAgIFwiLW1vei10cmFuc2l0aW9uOiBcIiArIHBhdGhUcmFuc2l0aW9uLFxuICAgICAgICAgIFwidHJhbnNpdGlvbjogXCIgKyBwYXRoVHJhbnNpdGlvbixcbiAgICAgICAgXS5qb2luKFwiO1wiKTtcbiAgICAgICAgLypcbiAgICAgICAgZ2F1Z2VWYWx1ZUVsZW0uc3R5bGUgPSBbXG4gICAgICAgICAgXCJmaWxsOiBcIiArIGMsXG4gICAgICAgICAgXCItd2Via2l0LXRyYW5zaXRpb246IFwiICsgdGV4dFRyYW5zaXRpb24sXG4gICAgICAgICAgXCItbW96LXRyYW5zaXRpb246IFwiICsgdGV4dFRyYW5zaXRpb24sXG4gICAgICAgICAgXCJ0cmFuc2l0aW9uOiBcIiArIHRleHRUcmFuc2l0aW9uLFxuICAgICAgICBdLmpvaW4oXCI7XCIpO1xuICAgICAgICAqL1xuICAgICAgfVxuXG4gICAgICBpbnN0YW5jZSA9IHtcbiAgICAgICAgc2V0TWF4VmFsdWU6IGZ1bmN0aW9uKG1heCkge1xuICAgICAgICAgIGxpbWl0ID0gbWF4O1xuICAgICAgICB9LFxuICAgICAgICBzZXRWYWx1ZTogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgdmFsdWUgPSBub3JtYWxpemUodmFsLCBtaW4sIGxpbWl0KTtcbiAgICAgICAgICBpZihnYXVnZUNvbG9yKSB7XG4gICAgICAgICAgICBzZXRHYXVnZUNvbG9yKHZhbHVlLCAwKVxuICAgICAgICAgIH1cbiAgICAgICAgICB1cGRhdGVHYXVnZSh2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFZhbHVlQW5pbWF0ZWQ6IGZ1bmN0aW9uKHZhbCwgZHVyYXRpb24pIHtcbiAgICAgICAgXHR2YXIgb2xkVmFsID0gdmFsdWU7XG4gICAgICAgICAgdmFsdWUgPSBub3JtYWxpemUodmFsLCBtaW4sIGxpbWl0KTtcbiAgICAgICAgICBpZihvbGRWYWwgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYoZ2F1Z2VDb2xvcikge1xuICAgICAgICAgICAgc2V0R2F1Z2VDb2xvcih2YWx1ZSwgZHVyYXRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBBbmltYXRpb24oe1xuICAgICAgICAgICAgc3RhcnQ6IG9sZFZhbCB8fCAwLFxuICAgICAgICAgICAgZW5kOiB2YWx1ZSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbiB8fCAxLFxuICAgICAgICAgICAgc3RlcDogZnVuY3Rpb24odmFsLCBmcmFtZSkge1xuICAgICAgICAgICAgICB1cGRhdGVHYXVnZSh2YWwsIGZyYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaW5pdGlhbGl6ZUdhdWdlKGdhdWdlQ29udGFpbmVyKTtcbiAgICAgIGluc3RhbmNlLnNldFZhbHVlKHZhbHVlKTtcbiAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9O1xuICB9KSgpO1xuXG4gIHJldHVybiBHYXVnZTtcbn0pO1xuIiwiXG5cblxuPGdhdWdlLXByb3BzPlxuICA8Zm9ybT5cbiAgXG4gICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgcm93XCI+XG4gICAgICA8bGFiZWwgZm9yPVwibWluXCIgY2xhc3M9XCJjb2wtc20tNCBjb2wtZm9ybS1sYWJlbCB0ZXh0LXJpZ2h0XCI+TWluPC9sYWJlbD5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tOFwiPlxuICAgICAgICA8aW5wdXQgXG4gICAgICAgICAgdHlwZT1cIm51bWJlclwiIFxuICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgXG4gICAgICAgICAgaWQ9XCJtaW5cIiBcbiAgICAgICAgICB2YWx1ZT17b3B0cy5wcm9wZXJ0aWVzLm1pbn1cbiAgICAgICAgICBvbmNoYW5nZT17b25NaW5DaGFuZ2V9PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCByb3dcIj5cbiAgICAgIDxsYWJlbCBmb3I9XCJtYXhcIiBjbGFzcz1cImNvbC1zbS00IGNvbC1mb3JtLWxhYmVsIHRleHQtcmlnaHRcIj5NYXg8L2xhYmVsPlxuICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS04XCI+XG4gICAgICAgIDxpbnB1dCBcbiAgICAgICAgICB0eXBlPVwibnVtYmVyXCIgXG4gICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBcbiAgICAgICAgICBpZD1cIm1heFwiIFxuICAgICAgICAgIHZhbHVlPXtvcHRzLnByb3BlcnRpZXMubWF4fVxuICAgICAgICAgIG9uY2hhbmdlPXtvbk1heENoYW5nZX0+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICA8L2Zvcm0+XG5cbiAgPHNjcmlwdD5cblxuICAgIHRoaXMub25NaW5DaGFuZ2UgPSAoZXYpID0+IHtcbiAgICAgIGNvbnN0IG1pbiA9IHBhcnNlRmxvYXQoZXYudGFyZ2V0LnZhbHVlKTtcbiAgICAgIHRoaXMub3B0cy5wcm9wZXJ0aWVzLm1pbiA9IG1pbjtcblxuICAgICAgaWYgKG1pbiA+IHRoaXMub3B0cy5wcm9wZXJ0aWVzLm1heCkge1xuICAgICAgICB0aGlzLm9wdHMucHJvcGVydGllcy5tYXggPSBtaW47XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMub25NYXhDaGFuZ2UgPSAoZXYpID0+IHtcbiAgICAgIGNvbnN0IG1heCA9IHBhcnNlRmxvYXQoZXYudGFyZ2V0LnZhbHVlKTtcbiAgICAgIHRoaXMub3B0cy5wcm9wZXJ0aWVzLm1heCA9IG1heDtcblxuICAgICAgaWYgKG1heCA8IHRoaXMub3B0cy5wcm9wZXJ0aWVzLm1pbikge1xuICAgICAgICB0aGlzLm9wdHMucHJvcGVydGllcy5taW4gPSBtYXg7XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgPC9zY3JpcHQ+XG4gIFxuICAgIFxuPC9nYXVnZS1wcm9wcz4iLCJcbmltcG9ydCBHYXVnZSBmcm9tICdzdmctZ2F1Z2UnO1xuXG48Z2F1Z2U+XG4gICAgPGRpdiBjbGFzcz1cImdhdWdlLWNvbnRhaW5lci1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiByZWY9XCJnYXVnZVwiIGNsYXNzPVwiZ2F1Z2UtY29udGFpbmVyIHtvcHRzLnByb3BlcnRpZXMuc3R5bGV9XCI+PC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8c3R5bGU+XG5cbiAgICAgICAgLmdhdWdlLWNvbnRhaW5lci1jb250YWluZXIge1xuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAuZ2F1Z2UtY29udGFpbmVyIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgfVxuICAgICAgICAuZ2F1Z2UtY29udGFpbmVyID4gLmdhdWdlID4gLmRpYWwge1xuICAgICAgICAgICAgc3Ryb2tlOiAjZGRkO1xuICAgICAgICAgICAgc3Ryb2tlLXdpZHRoOiAzO1xuICAgICAgICAgICAgZmlsbDogcmdiYSgwLDAsMCwwKTtcbiAgICAgICAgfVxuICAgICAgICAuZ2F1Z2UtY29udGFpbmVyID4gLmdhdWdlID4gLnZhbHVlIHtcbiAgICAgICAgICAgIHN0cm9rZTogcmdiKDQ3LCAxODAsIDIwMCk7XG4gICAgICAgICAgICBzdHJva2Utd2lkdGg6IDM7XG4gICAgICAgICAgICBmaWxsOiByZ2JhKDAsMCwwLDApO1xuICAgICAgICB9XG4gICAgICAgIC5nYXVnZS1jb250YWluZXIgPiAuZ2F1Z2UgPiAudmFsdWUtdGV4dCB7XG4gICAgICAgICAgICBmaWxsOiBibGFjaztcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgIH1cblxuICAgIDwvc3R5bGU+XG4gICAgPHNjcmlwdD5cblxuICAgICAgICB0aGlzLmdhdWdlID0gbnVsbDtcblxuICAgICAgICB0aGlzLm9uKCdtb3VudCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnNldFNpemUgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5yb290LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgY29uc3Qgc3ZnV2lkdGggPSByZWN0LndpZHRoO1xuICAgICAgICAgICAgY29uc3Qgc3ZnSGVpZ2h0ID0gcmVjdC5oZWlnaHQ7XG5cbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBNYXRoLm1pbihzdmdXaWR0aCwgc3ZnSGVpZ2h0KTtcbiAgICAgICAgICAgICQodGhpcy5yZWZzLmdhdWdlKS5jc3MoJ3dpZHRoJywgc2l6ZSArICdweCcpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICQodGhpcy5yZWZzLmdhdWdlKS5odG1sKCcnKTtcblxuICAgICAgICAgICAgdGhpcy5nYXVnZSA9IEdhdWdlKHRoaXMucmVmcy5nYXVnZSwge1xuICAgICAgICAgICAgICAgIG1pbjogdGhpcy5vcHRzLnByb3BlcnRpZXMubWluLFxuICAgICAgICAgICAgICAgIG1heDogdGhpcy5vcHRzLnByb3BlcnRpZXMubWF4LFxuICAgICAgICAgICAgICAgIHZhbHVlOiAwXG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICB0aGlzLnNldFNpemUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9uKCdwcm9wZXJ0aWVzVXBkYXRlJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMub24oJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0U2l6ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm9uKCd1cGRhdGUnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5nYXVnZSAmJiB0eXBlb2YgdGhpcy5vcHRzLnRhYmxlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2F1Z2Uuc2V0VmFsdWUodGhpcy5vcHRzLnRhYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICA8L3NjcmlwdD5cbjwvZ2F1Z2U+IiwiaW1wb3J0ICcuL2dhdWdlLnRhZyc7XG5pbXBvcnQgJy4vZ2F1Z2UtcHJvcHMudGFnJztcbmltcG9ydCBpbWFnZSBmcm9tICcuL2dhdWdlLnBuZyc7XG5cbmRhc2hib2FyZC5yZWdpc3RlcldpZGdldCgnZ2F1Z2UnLCB7XG4gIGxhYmVsOiAnR2F1Z2UnLFxuICBjYXRlZ29yeTogJ0Jhc2ljJyxcbiAgYWNjZXB0ZWRUeXBlczogWydudW1iZXInXSxcbiAgaW1hZ2UsXG4gIG1pblg6IDMsXG4gIG1pblk6IDIsXG4gIHByb3BlcnRpZXM6IHtcbiAgICB0YWc6ICdnYXVnZS1wcm9wcycsXG4gICAgZGVmYXVsdHM6IHtcbiAgICAgIG1pbjogMCxcbiAgICAgIG1heDogMTAwXG4gICAgfVxuICB9XG59KTsiXSwic291cmNlUm9vdCI6IiJ9