# -*- coding: utf-8 -*-
"""Constants"""

# Component Headers
HEAD_MID = b'\x00'
HEAD_CID_T = b'\x10'
HEAD_CID_T_PCF = b'\x11'
HEAD_CID_I = b'\x12'
HEAD_CID_I_PCF = b'\x13'
HEAD_CID_A = b'\x14'
HEAD_CID_A_PCF = b'\x15'
HEAD_CID_V = b'\x16'
HEAD_CID_V_PCF = b'\x17'
HEAD_CID_M = b'\x18'
HEAD_CID_M_PCF = b'\x19'
HEAD_DID = b'\x20'
HEAD_IID = b'\x30'

# Algorithm Constants
SYMBOLS = "C23456789rB1ZEFGTtYiAaVvMmHUPWXKDNbcdefghLjkSnopRqsJuQwxyz"
VALUES = ''.join([chr(i) for i in range(58)])
C2VTABLE = str.maketrans(SYMBOLS, VALUES)
V2CTABLE = str.maketrans(VALUES, SYMBOLS)
INPUT_TRIM = 128
WINDOW_SIZE_MID = 4
WINDOW_SIZE_CID_T = 5

MAX_INT64 = 2**64-1
GEAR1_NORM = 40
GEAR1_MIN = 20
GEAR1_MAX = 640
GEAR1_MASK1 = 0x016118
GEAR1_MASK2 = 0x00a0b1

GEAR2_NORM = 4096
GEAR2_MIN = 2048
GEAR2_MAX = 65536
GEAR2_MASK1 = 0x0003590703530000
GEAR2_MASK2 = 0x0000d90003530000


MINHASH_PERMUTATIONS = [[
    537959477672646300, 245618738963975811, 268860607727989169, 474355379353010054, 1511698345210945996,
    624022879445331318, 1276978359959916627, 41675606086892645, 959924911084842104, 334516048813209047,
    268592911919744135, 188344460398302894, 1104915318128761967, 1775126172038959804, 730247352651137783,
    1431879717087348193, 1561471348152528173, 2298134290183964020, 322368885571546422, 583660613951431137,
    472819990795901550, 969637985471521227, 816273398359454052, 1626059736292276949, 1669579688782903829,
    1554556357289386164, 206603323217940268, 925474250560997111, 1014939695188912755, 763135434502193639,
    1335627603356309761, 2095581840244671488, 307656468449584344, 120938275730698855, 364195379077320346,
    1906574350638921707, 1937771164961279517, 1540312096465980665, 1355283065072378020, 574635799029057439,
    228472116827787915, 1229248813033505435, 829321940838851385, 2202974184712415824, 1281611766906986645,
    1520333121992751877, 1319971899229851353, 1179257406939079873, 463077758995908832, 109008418824553667,
    188469903216354400, 2044029453200637899, 1148936949831837333, 935881378106590367, 1285270021648022994,
    45024452531139106, 187745424472701205, 811930273337278937, 214774532623257919, 525242105943587727,
    1230596569200800655, 679660430137261847, 2019649562105326877, 25590983140413215, 740119081695946928,
    635969105575619498, 1945078648984533634, 968571601118862862, 192554574902747369, 1561305020671413771,
    1726953377370963856, 696991574243222241, 1232388181984757347, 2138991684189937413, 561784323530167478,
    345563047681144397, 446848217089027047, 303404563961126835, 15271964089425620, 1744968581406547676,
    2096536202301845107, 246327133265134689, 510595836118309319, 1438517275225595977, 2243151433672733500,
    129709142878777121, 282405117618443594, 1776888087441473840, 2184425867093769692, 728276773842100725,
    863786377484248311, 941495988223724037, 1953420703679489166, 1621219562752450148, 989877362086521648,
    484804943208873378, 256650815408593975, 393012719160175364, 571905086055350143, 2292444461806859660,
    730050974087090738, 305448841880697451, 2240223500257813795, 1830003721405235747, 137095792751649739,
    2277038276655581817, 1546262639459949508, 1599841575537950429, 1133393255511674642, 406431693751207227,
    1737761108825183922, 1127404808801490806, 1666807674806718459, 476828818810039028, 377888285565504556,
    879033513228997581, 1399095471557289610, 415271388156366004, 130700804959753379, 1557602612200605126,
    2098092467375966906, 1963188523517012016, 355077706030551347, 2009322453424248396, 440050636760143232,
    1023647496862994730, 2092508592095440632, 1873110879482437651, 62447808116183247, 1879359547009586136,
    1926303447307884007, 1287176539313101438, 699892031886676378, 842075445152135371, 2106591164386302895,
    1798450252874107147, 545175109765692541, 848084917333178634, 1943277404882343971, 728340632071164769,
    259294432042120143, 238028089327806829, 1422826034505481793, 1560820916234724914, 2098350762394948944,
    1366778574487861009, 2294102142688065669, 340900604194719214, 721369108620517670, 352792318934658227,
    487598431216990156, 1498135967655365537, 1841107279229126134, 688652287342801942, 1503951422440218599,
    492827135913292983, 715503796958113522, 542198888226314791, 167922428085622580, 2140030257727834596,
    487469631435206989, 1903783499052674783, 1003972328142740104, 493764601069740113, 724929017235697952,
    42448937302983985, 1347591659009370890, 2166312802740367610, 1122463878038905349, 1849530664682520357,
    1977817968689837237, 2231688773225100141, 2037219479608418077, 2254577709350735155, 667040205124517548,
    1839832158274691284, 574719207528980050, 1070328411899585637, 489305665967860458, 1953971321177828714,
    163854714868266323, 1803199925366316759, 1909788517050587863, 339428156376042002, 1970494878473648964,
    1559065765736373268, 1634347975043230700, 1770060463354423973, 411115492882927907, 2117615417514392766,
    1538123693355220015, 1133124857017165940, 1131264601402437701, 2048235463013698980, 1652035274117321925,
    1344062829056152461, 393595644622495662, 982909833378078366, 1181946761201846828, 799234964004277777,
    875309111121273804, 1217639342500510828, 1101079512084824895, 1485601534159892279, 1215115451947026129,
    1820180195079045883, 990854909626498654, 1175991817584355293, 1600679417481394695, 23142712934593007,
    752264715745849514, 1039575536435439023, 2174987863607422326, 102384954690375486, 145133977131387402,
    687029923300242811, 582737710478128709, 1070671852419060625, 1418744861509060052, 618892612741284317,
    336754335803768902, 1473531416681296727, 1261667667298004928, 1652263684937739915, 1758902970739352024,
    564282824078432243, 313539632621458960, 1276776459204854805, 274681849395045767, 1071933359522142335,
    2108511364681295739, 602390935253589546, 1574606504774067949, 1920475675276894875, 1831784852893220289,
    10465410999495908, 2241998518007229379, 889695102408764449, 1362623548986395038, 1211348800356785336,
    507269868839589541, 1907876289023649050, 47116677925755991, 320452864137267838, 2062083084027217296,
    311782024317458652, 1367963975195259073, 2116172890974555329, 314865494239377011, 1528326954278541410,
    1100202901349287677, 587617176010024264, 91254881110607637, 131987433501732362, 221747562162139922,
    923104073342188970
    ], [
    2122292216861183229, 622381871430236099, 806989952376234033, 616516566848131545, 225222271217833034,
    1956889255784500428, 1895136219992171811, 391551085017406881, 2036103943384198496, 658857820640231632,
    383873026327820909, 2144858693797024496, 856900107172079291, 1220589679131101519, 1994572233985375032,
    1430904178410063425, 1901086000843021515, 1389289309588120245, 1383676471832445103, 1407641698124090566,
    2216157786746578562, 1615877722966478395, 904857911410129078, 2282289184949904621, 648740023142615145,
    1983406782588737323, 514807914170822265, 1768166930727305719, 428814327177719795, 889478948297132853,
    987207992285542053, 500224262073429955, 2171869963939455926, 1594541377747943009, 1951253999542807958,
    1270461535556634811, 248063028326501828, 1283551374817380276, 1755252973276408435, 742618610746267044,
    2074616042726853331, 1302839127546548502, 909990794597603780, 1338970434634242657, 764740921889580314,
    571080684947795859, 1977316817256594540, 60652229766918526, 827610811977299109, 330679062285753162,
    1766126224076048546, 1837649732944779472, 1288941722464395623, 672089648402822929, 1579182112870338063,
    513690373412868141, 1423246448457582888, 423522018128110607, 1546436371466771091, 192494378530633387,
    508929872324746305, 70248842163032146, 1027041240799567065, 1937007521195567938, 28212293734127547,
    1249327180368884901, 1562883448137478948, 147635618501707950, 1797797664273657041, 1211365184308047810,
    2279695790544424286, 828226755495738291, 2154215132688827903, 810612879949930903, 2165837935095948955,
    633522951231934143, 2242825174703670194, 889705521196453793, 2096064088654971255, 1723755985818675047,
    2183960023198517461, 1373042738676748838, 1381330593834847812, 2143617453834434913, 810525555982130642,
    1761115337211431072, 1327567657062902591, 1737358316160623839, 326309865390949181, 1372097754697049119,
    139654826738421092, 460065803068098814, 560704828672380818, 2086137841288443955, 89466402827271025,
    181100598448378438, 1416709592002367793, 912839571177199157, 1309315297069206179, 847140645498712325,
    1966193410969627052, 484909947046907211, 2150670442478439555, 404033046712730781, 658420122192664604,
    1021012240837591124, 533454105638325242, 2006127756399147965, 279092028869289924, 240103241799584817,
    841214367866264409, 916672187622547510, 706672344176874730, 769708005263803725, 58902332392405700,
    765972334526621127, 1795834391109642875, 1696900227454967611, 1523386437203947474, 2125555407071626845,
    1541431461552966314, 1127937586231838594, 2077514414874456998, 1042026649982594452, 1021801759338777475,
    659202887166530584, 2285222443334364130, 1809621997676874911, 1787926149827218899, 328871298504144136,
    2269163579335617145, 307315833992001897, 553610498686764198, 374694167022396628, 2253640368396504785,
    668018863677860726, 1991804572868364559, 950809975337056841, 2004801452852715912, 561444304100016309,
    990244892955700588, 602002064166593635, 1075318628377622301, 662277627862302960, 255719510335085152,
    16892428281252446, 232859536093383577, 307239749138547801, 1474156334065249250, 849578101983035029,
    2155601885509205927, 2148713739157070840, 1598131751991821731, 1395073168579091899, 270988343668192404,
    868792358802764001, 969530601637421364, 1230427238220622914, 1453207151494274772, 463871999091459368,
    1986248546570015157, 1450365039023910027, 1452959715926927749, 281696835519283544, 1549015044809614013,
    1259560894743403597, 941264490167564413, 824546270617699554, 674847723394517276, 380056020399355911,
    1125632614412238387, 163285315784502345, 89700722281776219, 1474027665794567112, 1658631424609962587,
    504744607784597589, 968754219871908829, 60073372395982215, 534026998286563876, 125822151366851074,
    5039438711901756, 316604921851625904, 2241983972716702765, 1103823166334682226, 1025078752427972822,
    2283529964456672540, 120265407740080390, 2074910783453437545, 820135656003578235, 952508371216211197,
    1683970610282279335, 1901625537395212044, 1049279816928912333, 1489285291999133770, 2125901084917186655,
    493809736389317121, 834773396684350551, 640114348534976861, 1373190502642303646, 553967292700623080,
    1392463544299750173, 1113492553069375102, 1992481447815066954, 1673874484677886590, 2200263470190003950,
    4100204781328690, 1764074196574361142, 1338095684148644215, 1164646051165801740, 297574906787548193,
    61292961590441985, 411945436029650472, 1817066340567761760, 842994068682839475, 1829560119125875168,
    1208967688531566033, 927891359311460396, 697609803351874805, 978838649645066549, 2148117982215047973,
    1122180488447126068, 1669245634667010303, 883925113877861635, 459549019374151833, 667584674373426705,
    1615606488813809630, 476130644380333808, 2075859158876141345, 1112049107363834934, 697936063104363055,
    1700477879528203724, 2280234839423053479, 2254761301566861445, 833628392562882575, 674246041863435157,
    237515221359704837, 1156585252957966558, 1767674803208510430, 288138254817544730, 1763247454960683771,
    953477399610546858, 1499498819838944325, 329519401576509934, 2298233140467988149, 280920493465625940,
    725510153966689976, 1714804496813980566, 868309567602943848, 1698018841518429414, 721634017570130549,
    860329129398357599, 1002055198255752132, 1781742471221598523, 2224193495151051210, 427077448392067782,
    774704489614066719
]]

CHUNKING_GEAR = [
    9584138480181866666, 4739450037122062430, 1042006760432515769, 10675154520554330663, 15869016765101259526,
    8970928072383595559, 1399451202205921674, 14523822808097149755, 16268498464839721299, 10481172452375523505,
    17104617054662428007, 1589812074021361642, 5529368114994898429, 16097147859444922117, 7366391750793198740,
    11100538009918328137, 1389689728615383157, 4977138822009172500, 908349889557194910, 14452518814433479233,
    2122926032271239532, 591612022955043504, 9379034436570273189, 12748258297147873806, 4307386326245858243,
    13845229916084989633, 11224472648935237303, 7047696390035316099, 2021133566789993437, 17387162748083618158,
    11746787256992261957, 6644482612611712714, 15729398955930993486, 18187694890389888249, 13375007170405426180,
    4646676434852504131, 13152698236329639071, 899989819383117385, 1604228284900755822, 13429168974601667864,
    3706248770764044735, 3719799868214789934, 339511817415309475, 12306710798301877171, 9844020938499650522,
    13507342816267977422, 15331217600725578556, 7506003564454403634, 17943236144189306428, 282153689319390566,
    7654271695669749695, 2650412143911437370, 6193440044944269691, 9296646612477743744, 15077579129862372948,
    67630558006200567, 11937031764123301943, 1634327986517329169, 16073934395340319514, 11660580892053471307,
    12301495579660351243, 16908718276972184511, 6851717516129410187, 13288278789994352315, 17482170774163197685,
    12177168157992128323, 1679876621412537528, 15666827561093998679, 4235032027386979601, 17396011814487376094,
    2036017399572567727, 4977152437582070133, 11341111713611820820, 5866443846249079891, 5131277185090952872,
    8325299058005558320, 5701450024662049407, 15870252139465586153, 641910037851244477, 5172232175829573378,
    2261684586607900474, 11396825283718526131, 12408680075109652465, 7761877592432080901, 13820035802684848169,
    8150091535052795450, 1103357817677537274, 13470426615970288837, 4696524065622673976, 9336804607285957500,
    13043178028673218162, 7139020806469476608, 12450708403507569100, 2877039905016676547, 15118872351294838361,
    3277072151995360446, 1979210712452295885, 14822651643543876641, 5849754172112174627, 13664543478254756807,
    16186972696580520130, 14259131679517995788, 1772106294408535188, 2668205339646827112, 3734021086026184498,
    4257506854909152229, 6797729639474582495, 3708095106171770747, 15445894064208319783, 11045733249000282278,
    6925260395759991481, 6761677416581440942, 3134957115005596133, 5496794829211694837, 225035875953155227,
    18051382753002575119, 6911658830635795092, 6648838042848840266, 7680838377178993211, 14373546918520540763,
    7385952462173201391, 7500965322394952100, 15539214383494689771, 14355530880918970074, 4040759991734970063,
    1335151750647325670, 13713452291232361388, 8852782707920062625, 6076783566257059794, 14451547968886132839,
    6756882940270420653, 17423128808598833972, 5877907771709558759, 14308413074787508328, 12294727846616188882,
    13766545313722789196, 7000331838802888702, 15110028412924060381, 15869145452552081798, 10836437530623796047,
    1273143868608979117, 17728019699248776702, 379008101491021165, 6658832383485441856, 6005905363267598720,
    4792802520786808134, 17024928019214694263, 7949301678895773307, 14602122883430422290, 6416689239839102410,
    18112987618441438141, 5424513836620859057, 12327961344656070412, 18229731317766561349, 6214341855555485197,
    14659604854593022088, 18341976098904231516, 9093141550798891276, 4487469223051523007, 12576621890114680116,
    11368566035561888278, 16632902625329423294, 13764076000271015053, 11494903226088746337, 14079100963083335535,
    5976601008655555884, 5685807667042201553, 16503266544486236927, 5505089898459277917, 17076606531971661551,
    939769563919939433, 17217248958964594832, 11196454443995107214, 13253314556391295544, 17340262486782904124,
    5483165811177129540, 121736889831618943, 6318157315988658220, 14520375112718267902, 689388276875596813,
    5273319774965020902, 7975410517565653865, 13935269057627157047, 16821796908479891795, 5882048506860913277,
    18003709489856105216, 1424933842252756366, 6634557257081066175, 16179356916240399588, 11153419399622634817,
    15654294493035402949, 2652919763627807814, 16437183290373292867, 16903315446495122175, 3575318971059548300,
    3073697257555445515, 16187136733800880291, 15191964085364171996, 11982016174040399757, 1948589207658719032,
    14444449012119241408, 7130754012353479650, 7480280819583944745, 3603028513293740433, 7021162527209392860,
    2124450348946366496, 14349140477237426219, 7396225914272122063, 16288120608246645021, 7309794834881975478,
    16746864570463829614, 9239996606832866982, 14126189643057989505, 5785181374404079776, 16681042508550037223,
    9085478584447523753, 12879577862603639783, 13351556131001260565, 10860701565908202403, 9109516948909639475,
    2942389181877553466, 1907923359833671766, 1700327967934711796, 4355952370607563279, 6159416062364401684,
    8120694842642123744, 4670360822544180192, 12684384265447906291, 11518186189217338692, 14839496566538901930,
    13515715604989800698, 12135065096961528408, 9056982071865174221, 12690699907549395246, 2080896935929507230,
    14546126411900211421, 6222235617711806766, 13387691023848518640, 1259523422199249803, 1733690531272524911,
    16691543548458831721, 3252085970219428027, 790320086519395195, 8366099548552136926, 357423734596052102,
    6375583027298966643, 88639135753272123, 13813972796887520980, 8203570281250814300, 18377325011640278855,
    2922465295015278442, 2164203008979443347, 7447171935848155518, 3663261456454345351, 5865411828910435346,
    13570376904595974307
]
