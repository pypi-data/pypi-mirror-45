

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The autologging API &mdash; Autologging 1.3.2 documentation</title>
  

  
  
  
  

  

  
  
    
      <link rel="search" type="application/opensearchdescription+xml"
            title="Search within Autologging 1.3.2 documentation"
            href="_static/opensearch.xml"/>
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples of using autologging" href="examples.html" />
    <link rel="prev" title="Introduction to Autologging" href="intro.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Autologging
          

          
          </a>

          
            
            
              <div class="version">
                1.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction to Autologging</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The <code class="docutils literal notranslate"><span class="pre">autologging</span></code> API</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples of using <code class="docutils literal notranslate"><span class="pre">autologging</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">How does <code class="docutils literal notranslate"><span class="pre">autologging</span></code> work?</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Autologging 1.3.2 testing summary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Autologging</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>The <code class="docutils literal notranslate"><span class="pre">autologging</span></code> API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/autologging.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-autologging-api">
<h1>The <code class="docutils literal notranslate"><span class="pre">autologging</span></code> API<a class="headerlink" href="#the-autologging-api" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Release:</th><td class="field-body">1.3.2</td>
</tr>
</tbody>
</table>
<span class="target" id="module-autologging"></span><dl class="data">
<dt id="autologging.TRACE">
<code class="descclassname">autologging.</code><code class="descname">TRACE</code><em class="property"> = 1</em><a class="headerlink" href="#autologging.TRACE" title="Permalink to this definition">¶</a></dt>
<dd><p>A custom tracing log level, lower in severity than <code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.DEBUG</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="autologging.logged">
<code class="descclassname">autologging.</code><code class="descname">logged</code><span class="sig-paren">(</span><em>obj</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autologging.html#logged"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autologging.logged" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a logger member to a decorated class or function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>obj</strong> – the class or function object being decorated, or an optional
<a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a> object to be used as the parent logger
(instead of the default module-named logger)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><em>obj</em> if <em>obj</em> is a class or function; otherwise, if <em>obj</em> is a
logger, return a lambda decorator that will in turn set the
logger attribute and return <em>obj</em></td>
</tr>
</tbody>
</table>
<p>If <em>obj</em> is a <code class="xref py py-obj docutils literal notranslate"><span class="pre">class</span></code>, then <code class="docutils literal notranslate"><span class="pre">obj.__log</span></code> will have the logger
name “&lt;module-name&gt;.&lt;class-name&gt;”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(levelname)s</span><span class="s2">:</span><span class="si">%(name)s</span><span class="s2">:</span><span class="si">%(funcName)s</span><span class="s2">:</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@logged</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">Sample</span><span class="p">:</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">__log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;This is a test.&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Sample</span><span class="p">()</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>
<span class="go">DEBUG:autologging.Sample:test:This is a test.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Autologging will prefer to use the class’s <code class="docutils literal notranslate"><span class="pre">__qualname__</span></code> when
it is available (Python 3.3+). Otherwise, the class’s
<code class="docutils literal notranslate"><span class="pre">__name__</span></code> is used. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Outer</span><span class="p">:</span>

   <span class="nd">@logged</span>
   <span class="k">class</span> <span class="nc">Nested</span><span class="p">:</span> <span class="k">pass</span>
</pre></div>
</div>
<p class="last">Under Python 3.3+, <code class="docutils literal notranslate"><span class="pre">Nested.__log</span></code> will have the name
“autologging.Outer.Nested”, while under Python 2.7 or 3.2, the
logger name will be “autologging.Nested”.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 0.4.0: </span>Functions decorated with <code class="docutils literal notranslate"><span class="pre">&#64;logged</span></code> use a <em>single</em> underscore
in the logger variable name (e.g. <code class="docutils literal notranslate"><span class="pre">my_function._log</span></code>) rather
than a double underscore.</p>
</div>
<p>If <em>obj</em> is a function, then <code class="docutils literal notranslate"><span class="pre">obj._log</span></code> will have the logger name
“&lt;module-name&gt;”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(levelname)s</span><span class="s2">:</span><span class="si">%(name)s</span><span class="s2">:</span><span class="si">%(funcName)s</span><span class="s2">:</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@logged</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">test</span><span class="o">.</span><span class="n">_log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;This is a test.&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">DEBUG:autologging:test:This is a test.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Within a logged function, the <code class="docutils literal notranslate"><span class="pre">_log</span></code> attribute must be
qualified by the function name.</p>
</div>
<p>If <em>obj</em> is a <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a> object, then that logger is
used as the parent logger (instead of the default module-named
logger):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(levelname)s</span><span class="s2">:</span><span class="si">%(name)s</span><span class="s2">:</span><span class="si">%(funcName)s</span><span class="s2">:</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@logged</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;test.parent&quot;</span><span class="p">))</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">Sample</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">__log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;This is a test.&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Sample</span><span class="p">()</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>
<span class="go">DEBUG:test.parent.Sample:test:This is a test.</span>
</pre></div>
</div>
<p>Again, functions are similar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(levelname)s</span><span class="s2">:</span><span class="si">%(name)s</span><span class="s2">:</span><span class="si">%(funcName)s</span><span class="s2">:</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@logged</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;test.parent&quot;</span><span class="p">))</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">test</span><span class="o">.</span><span class="n">_log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;This is a test.&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">DEBUG:test.parent:test:This is a test.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>For classes, the logger member is made “private” (i.e. <code class="docutils literal notranslate"><span class="pre">__log</span></code>
with double underscore) to ensure that log messages that include
the <em>%(name)s</em> format placeholder are written with the correct
name.</p>
<p>Consider a subclass of a <code class="docutils literal notranslate"><span class="pre">&#64;logged</span></code>-decorated parent class. If
the subclass were <strong>not</strong> decorated with <code class="docutils literal notranslate"><span class="pre">&#64;logged</span></code> and could
access the parent’s logger member directly to make logging
calls, those log messages would display the name of the
parent class, not the subclass.</p>
<p class="last">Therefore, subclasses of a <code class="docutils literal notranslate"><span class="pre">&#64;logged</span></code>-decorated parent class
that wish to use a provided <code class="docutils literal notranslate"><span class="pre">self.__log</span></code> object must themselves
be decorated with <code class="docutils literal notranslate"><span class="pre">&#64;logged</span></code>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Although the <code class="docutils literal notranslate"><span class="pre">&#64;logged</span></code> and <code class="docutils literal notranslate"><span class="pre">&#64;traced</span></code> decorators will “do the
right thing” regardless of the order in which they are applied to
the same function, it is recommended that <code class="docutils literal notranslate"><span class="pre">&#64;logged</span></code> always be
used as the innermost decorator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@traced</span>
<span class="nd">@logged</span>
<span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
    <span class="n">my_function</span><span class="o">.</span><span class="n">_log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">This is because <code class="docutils literal notranslate"><span class="pre">&#64;logged</span></code> simply sets the <code class="docutils literal notranslate"><span class="pre">_log</span></code> attribute
and then returns the original function, making it “safe” to use
in combination with any other decorator.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Both <a class="reference external" href="http://www.jython.org/">Jython</a> and
<a class="reference external" href="http://ironpython.net/">IronPython</a> report an “internal” class
name using its mangled form, which will be reflected in the
default logger name.</p>
<p>For example, in the sample code below, both Jython and IronPython
will use the default logger name “autologging._Outer__Nested”
(whereas CPython/PyPy/Stackless would use “autologging.__Nested”
under Python 2 or “autologging.Outer.__Nested” under Python 3.3+)</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Outer</span><span class="p">:</span>
   <span class="nd">@logged</span>
   <span class="k">class</span> <span class="nc">__Nested</span><span class="p">:</span>
      <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><a class="reference external" href="http://ironpython.net/">IronPython</a> does not fully support
frames (even with the -X:FullFrames option), so you are likely to
see things like misreported line numbers and “&lt;unknown file&gt;” in
log records emitted when running under IronPython.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="autologging.traced">
<code class="descclassname">autologging.</code><code class="descname">traced</code><span class="sig-paren">(</span><em>*args</em>, <em>**keywords</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/autologging.html#traced"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autologging.traced" title="Permalink to this definition">¶</a></dt>
<dd><p>Add call and return tracing to an unbound function or to the
methods of a class.</p>
<p>The arguments to <code class="docutils literal notranslate"><span class="pre">traced</span></code> differ depending on whether it is being
used to trace an unbound function or the methods of a class:</p>
<p class="rubric">Trace an unbound function using the default logger</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>func</strong> – the unbound function to be traced</td>
</tr>
</tbody>
</table>
<p>By default, a logger named for the function’s module is used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">level</span><span class="o">=</span><span class="n">TRACE</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(levelname)s</span><span class="s2">:</span><span class="si">%(name)s</span><span class="s2">:</span><span class="si">%(funcName)s</span><span class="s2">:</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@traced</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="go">TRACE:autologging:func:CALL *(7, 9) **{}</span>
<span class="go">TRACE:autologging:func:RETURN 16</span>
<span class="go">16</span>
</pre></div>
</div>
<p class="rubric">Trace an unbound function using a named logger</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>logger</strong> (<a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.7)"><em>logging.Logger</em></a>) – the parent logger used to trace the unbound function</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">level</span><span class="o">=</span><span class="n">TRACE</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(levelname)s</span><span class="s2">:</span><span class="si">%(name)s</span><span class="s2">:</span><span class="si">%(funcName)s</span><span class="s2">:</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@traced</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;my.channel&quot;</span><span class="p">))</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="go">TRACE:my.channel:func:CALL *(7, 9) **{}</span>
<span class="go">TRACE:my.channel:func:RETURN 16</span>
<span class="go">16</span>
</pre></div>
</div>
<p class="rubric">Trace default methods using the default logger</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>class</strong> – the class whose methods will be traced</td>
</tr>
</tbody>
</table>
<p>By default, all “public”, “_nonpublic”, and “__internal” methods, as
well as the special “__init__” and “__call__” methods, will be
traced. Tracing log entries will be written to a logger named for
the module and class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">level</span><span class="o">=</span><span class="n">TRACE</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(levelname)s</span><span class="s2">:</span><span class="si">%(name)s</span><span class="s2">:</span><span class="si">%(funcName)s</span><span class="s2">:</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@traced</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">Class</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">public</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">+</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">_nonpublic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">-</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__internal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">**</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s2">&quot;Class(</span><span class="si">%r</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">Class</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="go">TRACE:autologging.Class:__init__:CALL *(7,) **{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">public</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="go">TRACE:autologging.Class:public:CALL *(9,) **{}</span>
<span class="go">TRACE:autologging.Class:public:RETURN 16</span>
<span class="go">16</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">_nonpublic</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">TRACE:autologging.Class:_nonpublic:CALL *(5,) **{}</span>
<span class="go">TRACE:autologging.Class:_nonpublic:RETURN 2</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">_Class__internal</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">TRACE:autologging.Class:__internal:CALL *() **{&#39;y&#39;: 3}</span>
<span class="go">TRACE:autologging.Class:__internal:RETURN 343</span>
<span class="go">343</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="c1"># not traced by default</span>
<span class="go">&#39;Class(7)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="p">()</span>
<span class="go">TRACE:autologging.Class:__call__:CALL *() **{}</span>
<span class="go">TRACE:autologging.Class:__call__:RETURN 7</span>
<span class="go">7</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When the runtime Python version is &gt;= 3.3, the <em>qualified</em> class
name will be used to name the tracing logger (i.e. a nested class
will write tracing log entries to a logger named
“module.Parent.Nested”).</p>
</div>
<p class="rubric">Trace default methods using a named logger</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>logger</strong> (<a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.7)"><em>logging.Logger</em></a>) – the parent logger used to trace the methods of the class</td>
</tr>
</tbody>
</table>
<p>By default, all “public”, “_nonpublic”, and “__internal” methods, as
well as the special “__init__” method, will be traced. Tracing log
entries will be written to the specified logger:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">level</span><span class="o">=</span><span class="n">TRACE</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(levelname)s</span><span class="s2">:</span><span class="si">%(name)s</span><span class="s2">:</span><span class="si">%(funcName)s</span><span class="s2">:</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@traced</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;my.channel&quot;</span><span class="p">))</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">Class</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">public</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">+</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">_nonpublic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">-</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__internal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">**</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s2">&quot;Class(</span><span class="si">%r</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">Class</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="go">TRACE:my.channel.Class:__init__:CALL *(7,) **{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">public</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="go">TRACE:my.channel.Class:public:CALL *(9,) **{}</span>
<span class="go">TRACE:my.channel.Class:public:RETURN 16</span>
<span class="go">16</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">_nonpublic</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">TRACE:my.channel.Class:_nonpublic:CALL *(5,) **{}</span>
<span class="go">TRACE:my.channel.Class:_nonpublic:RETURN 2</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">_Class__internal</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">TRACE:my.channel.Class:__internal:CALL *() **{&#39;y&#39;: 3}</span>
<span class="go">TRACE:my.channel.Class:__internal:RETURN 343</span>
<span class="go">343</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="c1"># not traced by default</span>
<span class="go">&#39;Class(7)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="p">()</span>
<span class="go">TRACE:my.channel.Class:__call__:CALL *() **{}</span>
<span class="go">TRACE:my.channel.Class:__call__:RETURN 7</span>
<span class="go">7</span>
</pre></div>
</div>
<p class="rubric">Trace specified methods using the default logger</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>method_names</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a>) – the names of the methods that will be traced</td>
</tr>
</tbody>
</table>
<p>Tracing log entries will be written to a logger named for the
module and class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">level</span><span class="o">=</span><span class="n">TRACE</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(levelname)s</span><span class="s2">:</span><span class="si">%(name)s</span><span class="s2">:</span><span class="si">%(funcName)s</span><span class="s2">:</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@traced</span><span class="p">(</span><span class="s2">&quot;public&quot;</span><span class="p">,</span> <span class="s2">&quot;__internal&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">Class</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">public</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">+</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">_nonpublic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">-</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__internal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">**</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s2">&quot;Class(</span><span class="si">%r</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">Class</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">public</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="go">TRACE:autologging.Class:public:CALL *(9,) **{}</span>
<span class="go">TRACE:autologging.Class:public:RETURN 16</span>
<span class="go">16</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">_nonpublic</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">_Class__internal</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">TRACE:autologging.Class:__internal:CALL *() **{&#39;y&#39;: 3}</span>
<span class="go">TRACE:autologging.Class:__internal:RETURN 343</span>
<span class="go">343</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="go">&#39;Class(7)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="p">()</span>
<span class="go">7</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When method names are specified explicitly via <em>args</em>,
Autologging ensures that each method is actually defined in
the body of the class being traced. (This means that inherited
methods that are not overridden are <strong>never</strong> traced, even if
they are named explicitly in <em>args</em>.)</p>
<p>If a defintion for any named method is not found in the class
body, either because the method is inherited or because the
name is misspelled, Autologging will issue a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#UserWarning" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UserWarning</span></code></a>.</p>
<p>If you wish to trace a method from a super class, you have two
options:</p>
<ol class="last arabic simple">
<li>Use <code class="docutils literal notranslate"><span class="pre">traced</span></code> to decorate the super class.</li>
<li>Override the method and trace it in the subclass.</li>
</ol>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When the runtime Python version is &gt;= 3.3, the <em>qualified</em> class
name will be used to name the tracing logger (i.e. a nested class
will write tracing log entries to a logger named
“module.Parent.Nested”).</p>
</div>
<p class="rubric">Trace specified methods using a named logger</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>logger</strong> (<a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.7)"><em>logging.Logger</em></a>) – the parent logger used to trace the methods of the class</li>
<li><strong>method_names</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a>) – the names of the methods that will be traced</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">level</span><span class="o">=</span><span class="n">TRACE</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(levelname)s</span><span class="s2">:</span><span class="si">%(name)s</span><span class="s2">:</span><span class="si">%(funcName)s</span><span class="s2">:</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@traced</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;my.channel&quot;</span><span class="p">),</span> <span class="s2">&quot;public&quot;</span><span class="p">,</span> <span class="s2">&quot;__internal&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">Class</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">public</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">+</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">_nonpublic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">-</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__internal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">**</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s2">&quot;Class(</span><span class="si">%r</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">Class</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">public</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="go">TRACE:my.channel.Class:public:CALL *(9,) **{}</span>
<span class="go">TRACE:my.channel.Class:public:RETURN 16</span>
<span class="go">16</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">_nonpublic</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">_Class__internal</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">TRACE:my.channel.Class:__internal:CALL *() **{&#39;y&#39;: 3}</span>
<span class="go">TRACE:my.channel.Class:__internal:RETURN 343</span>
<span class="go">343</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="c1"># not traced by default</span>
<span class="go">&#39;Class(7)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="p">()</span>
<span class="go">7</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When method names are specified explicitly via <em>args</em>,
Autologging ensures that each method is actually defined in
the body of the class being traced. (This means that inherited
methods that are not overridden are <strong>never</strong> traced, even if
they are named explicitly in <em>args</em>.)</p>
<p>If a defintion for any named method is not found in the class
body, either because the method is inherited or because the
name is misspelled, Autologging will issue a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#UserWarning" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UserWarning</span></code></a>.</p>
<p>If you wish to trace a method from a super class, you have two
options:</p>
<ol class="last arabic simple">
<li>Use <code class="docutils literal notranslate"><span class="pre">traced</span></code> to decorate the super class.</li>
<li>Override the method and trace it in the subclass.</li>
</ol>
</div>
<p class="rubric">Exclude specified methods from tracing</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.3.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>method_names</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a>) – the names of the methods that will be excluded from tracing</li>
<li><strong>exclude</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – <code class="docutils literal notranslate"><span class="pre">True</span></code> to cause the method names list to be interpreted as
an exclusion list (<code class="docutils literal notranslate"><span class="pre">False</span></code> is the default, and causes the named
methods to be <strong>included</strong> as described above)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The example below demonstrates exclusions using the default logger.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">level</span><span class="o">=</span><span class="n">TRACE</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span>
<span class="gp">... </span>    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(levelname)s</span><span class="s2">:</span><span class="si">%(name)s</span><span class="s2">:</span><span class="si">%(funcName)s</span><span class="s2">:</span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@traced</span><span class="p">(</span><span class="s2">&quot;_nonpublic&quot;</span><span class="p">,</span> <span class="s2">&quot;__internal&quot;</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">Class</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">public</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">+</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">_nonpublic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">-</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__internal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">**</span> <span class="n">y</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="s2">&quot;Class(</span><span class="si">%r</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">Class</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">public</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="go">TRACE:autologging.Class:public:CALL *(9,) **{}</span>
<span class="go">TRACE:autologging.Class:public:RETURN 16</span>
<span class="go">16</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">_nonpublic</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">_Class__internal</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">343</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="go">&#39;Class(7)&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="p">()</span>
<span class="go">TRACE:autologging.Class:__call__:CALL *() **{}</span>
<span class="go">TRACE:autologging.Class:__call__:RETURN 7</span>
<span class="go">7</span>
</pre></div>
</div>
<p>When method names are excluded via <em>args</em> and the <em>exclude</em> keyword,
Autologging <strong>ignores</strong> methods that are not actually defined in the
body of the class being traced.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If an exclusion list causes the list of traceable methods to
resolve empty, then Autologging will issue a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#UserWarning" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UserWarning</span></code></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When the runtime Python version is &gt;= 3.3, the <em>qualified</em> class
name will be used to name the tracing logger (i.e. a nested class
will write tracing log entries to a logger named
“module.Parent.Nested”).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When tracing a class, if the default (class-named) logger is
used <strong>and</strong> the runtime Python version is &gt;= 3.3, then the
<em>qualified</em> class name will be used to name the tracing logger
(i.e. a nested class will write tracing log entries to a logger
named “module.Parent.Nested”).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If method names are specified when decorating a function, a
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#UserWarning" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UserWarning</span></code></a> is issued, but the methods names are ignored
and the function is traced as though the method names had not
been specified.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Both <a class="reference external" href="http://www.jython.org/">Jython</a> and
<a class="reference external" href="http://ironpython.net/">IronPython</a> report an “internal” class
name using its mangled form, which will be reflected in the
default tracing logger name.</p>
<p>For example, in the sample code below, both Jython and IronPython
will use the default tracing logger name
“autologging._Outer__Nested” (whereas CPython/PyPy/Stackless
would use “autologging.__Nested” under Python 2 or
“autologging.Outer.__Nested” under Python 3.3+):</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Outer</span><span class="p">:</span>
   <span class="nd">@traced</span>
   <span class="k">class</span> <span class="nc">__Nested</span><span class="p">:</span>
      <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Neither <a class="reference external" href="http://www.jython.org/">Jython</a> nor
<a class="reference external" href="http://ironpython.net/">IronPython</a> currently implement the
<code class="docutils literal notranslate"><span class="pre">function.__code__.co_lnotab</span></code> attribute, so the last line
number of a function cannot be determined by Autologging.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 1.3.1: </span>Due to unavoidable inconsistencies in line number tracking across
Python variants (see
<a class="reference external" href="https://github.com/mzipay/Autologging/issues/6">issues/6</a>, as
of version 1.3.1 and until further notice Autologging will only
record the first line number of the function being traced in all
tracing CALL and RETURN records.
(Note that YIELD tracing records for generator iterators will
continue to record the correct line number on variants other than
IronPython.)</p>
</div>
</dd></dl>

<dl class="function">
<dt id="autologging.install_traced_noop">
<code class="descclassname">autologging.</code><code class="descname">install_traced_noop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/autologging.html#install_traced_noop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#autologging.install_traced_noop" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace the <a class="reference internal" href="#autologging.traced" title="autologging.traced"><code class="xref py py-func docutils literal notranslate"><span class="pre">traced</span></code></a> decorator with an identity (no-op)
decorator.</p>
<p>Although the overhead of a <code class="docutils literal notranslate"><span class="pre">&#64;traced</span></code> function or method is minimal
when the <code class="xref py py-data docutils literal notranslate"><span class="pre">TRACED</span></code> log level is disabled, there is still <em>some</em>
overhead (the logging level check, an extra function call).</p>
<p>If you would like to completely <em>eliminate</em> this overhead, call this
function <strong>before</strong> any classes or functions in your application are
decorated with <code class="docutils literal notranslate"><span class="pre">&#64;traced</span></code>. The <a class="reference internal" href="#autologging.traced" title="autologging.traced"><code class="xref py py-func docutils literal notranslate"><span class="pre">traced</span></code></a> decorator will be
replaced with a no-op decorator that simply returns the class or
function unmodified.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The <strong>recommended</strong> way to install the no-op <code class="docutils literal notranslate"><span class="pre">&#64;traced</span></code>
decorator is to set the <code class="docutils literal notranslate"><span class="pre">AUTOLOGGING_TRACED_NOOP</span></code>
environment variable to any non-empty value.</p>
<p class="last">If the <code class="docutils literal notranslate"><span class="pre">AUTOLOGGING_TRACED_NOOP</span></code> environment variable is
set to a non-empty value when Autologging is loaded, the
<code class="docutils literal notranslate"><span class="pre">&#64;traced</span></code> no-op will be installed automatically.</p>
</div>
<p>As an alternative to setting the <code class="docutils literal notranslate"><span class="pre">AUTOLOGGING_TRACED_NOOP</span></code>
environment variable, you can also call this function directly in
your application’s bootstrap module. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">autologging</span>

<span class="k">if</span> <span class="n">running_in_production</span><span class="p">:</span>
    <span class="n">autologging</span><span class="o">.</span><span class="n">install_traced_noop</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>This function <strong>does not</strong> “revert” any already-<code class="docutils literal notranslate"><span class="pre">&#64;traced</span></code> class
or function! It simply replaces the <code class="docutils literal notranslate"><span class="pre">autologging.traced</span></code> module
reference with a no-op.</p>
<p class="last">For this reason it is imperative that
<code class="docutils literal notranslate"><span class="pre">autologging.install_traced_noop()</span></code> be called <strong>before</strong> the
<code class="docutils literal notranslate"><span class="pre">&#64;traced</span></code> decorator has been applied to any class or function
in the application. (This is why the <code class="docutils literal notranslate"><span class="pre">AUTOLOGGING_TRACED_NOOP</span></code>
environment variable is the recommended approach for installing
the no-op - it allows Autologging itself to guarantee that the
no-op is installed before any classes or functions are
decorated.)</p>
</div>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="examples.html" class="btn btn-neutral float-right" title="Examples of using autologging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="intro.html" class="btn btn-neutral" title="Introduction to Autologging" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, 2015, 2016, 2018, 2019 Matthew Zipay.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.3.2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>