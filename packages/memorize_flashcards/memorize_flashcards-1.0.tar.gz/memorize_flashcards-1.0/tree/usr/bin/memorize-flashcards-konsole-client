#!/usr/bin/python3
"""memorize-flashcards-konsole-client
Usage:
    nsg-run-compose-branch <coursename> <num-cards>
"""
import sys
from memorize_flashcards.policy import ClassicPolicy as Policy
from docopt import docopt

arguments = docopt(__doc__)

coursename = arguments['<coursename>']
try:
	numcards = int(arguments['<num-cards>'])
except ValueError:
	print('E: "num-cards" should be integer', file=sys.stderr)
	sys.exit(1)

try:
	policy = Policy(coursename)
except Exception as e:
	print(e.message, file=sys.stderr)
	sys.exit(1)

for i in range(numcards):
	card = policy.fetch_card()
	print("----------------------- {}".format(card.hash_))
	print(card.get_printable('Q'))
	_ = input('')
	print(card.get_printable('A'))
	yn = ''
	while (yn.lower() != 'y') and (yn.lower() != 'n'):
		yn = input('Did you know the answer? [y/n]')
	policy.update_card(card, True if yn.lower() == 'y' else False)
policy.write_changes()
