[tox]
skipsdist = True


[testenv]

basepython = python

deps =
     -r requirements.txt
     -r dev-requirements.txt
     -e .

commands_pre =
    {envbindir}/pip install castervoice --no-deps


[testenv:coverage]

commands =
   {envbindir}/pytest -vv --cov=voca --cov=tests {posargs}
   {envbindir}/coverage report -m
   {envbindir}/cuv graph

[testenv:check]

commands =

   ./pycli clean
   ./pycli init
   ./pycli build
   {envbindir}/twine check dist/*
   {envbindir}/black --check src/


[testenv:test]

commands =
    {envbindir}/pytest -vv {posargs}
