(function(t){function e(e){for(var a,r,o=e[0],c=e[1],l=e[2],d=0,f=[];d<o.length;d++)r=o[d],i[r]&&f.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={1:0},s=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([17,0]),n()})({0:function(t,e){},17:function(t,e,n){t.exports=n("Vtdi")},"4hSP":function(t,e,n){"use strict";var a=n("B0HM"),i=n.n(a);i.a},"A+sQ":function(t,e,n){"use strict";var a=n("J1Oy"),i=n.n(a);i.a},B0HM:function(t,e,n){},Flay:function(t,e,n){},"Gb+C":function(t,e,n){},"H/Bb":function(t,e,n){"use strict";var a=n("slK8"),i=n.n(a);i.a},HieW:function(t,e,n){},IMwG:function(t,e,n){},J1Oy:function(t,e,n){},JQ9l:function(t,e,n){},M8Iz:function(t,e,n){"use strict";var a=n("MiYT"),i=n.n(a);i.a},MiYT:function(t,e,n){},O8Q7:function(t,e,n){"use strict";var a=n("tcbX"),i=n.n(a);i.a},Po1J:function(t,e,n){},RnhZ:function(t,e,n){var a={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function i(t){var e=s(t);return n(e)}function s(t){var e=a[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}i.keys=function(){return Object.keys(a)},i.resolve=s,t.exports=i,i.id="RnhZ"},VU6j:function(t,e,n){},Vtdi:function(t,e,n){"use strict";n.r(e);n("VRzm");var a=n("Kw5r"),i=n("zlta"),s=n.n(i);n("v0CA");a["default"].use(s.a,{});var r,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("router-view"),n("v-snackbar",{attrs:{"multi-line":!0,timeout:5e3,top:!0,color:t.getMessage().color},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.getMessage().message)+"\n    "),n("v-btn",{attrs:{flat:""},on:{click:function(e){t.snackbar=!t.snackbar}}},[t._v("\n      Close\n    ")])],1)],1)},c=[],l=n("yT7P"),u=n("L2JU"),d={name:"App",computed:{snackbar:{get:function(){return this.getMessage().message},set:function(t){t||this.setMessage({message:"",color:"primary"})}}},methods:Object(l["a"])({},Object(u["c"])(["getMessage"]),Object(u["d"])(["setMessage"]))},f=d,m=n("KHd+"),p=Object(m["a"])(f,o,c,!1,null,null,null),v=p.exports,b=n("jE9Z"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-content",[n("v-container",{attrs:{fluid:"","fill-height":""}},[n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[n("v-card",{staticClass:"login",on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.submit()}}},[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-toolbar-title",[t._v("Login")]),n("v-spacer"),n("v-icon",{attrs:{large:""}},[t._v("star")])],1),n("v-card-text",[n("v-form",{attrs:{novalidate:""},on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.submit(e)}}},[t.loginFailed?n("p",[t._v("Your username or password is incorrect. Please try again...")]):t._e(),n("v-text-field",{attrs:{required:"",label:"Login"},model:{value:t.name,callback:function(e){t.name="string"===typeof e?e.trim():e},expression:"name"}}),n("v-text-field",{attrs:{required:"",label:"Password","append-icon":t.show?"visibility_off":"visibility",type:t.show?"text":"password"},on:{"click:append":function(e){t.show=!t.show},keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submit(e):null}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{staticClass:"primary",on:{click:function(e){t.submit()}}},[t._v("Submit")])],1)],1)],1)],1)],1)],1)},g=[],j=(n("f3/d"),{data:function(){return{password:"",name:"",show:!1,loginFailed:!1}},methods:{submit:function(){var t=this,e={name:this.name,password:this.password};this.$http.post("/login/",e).then(function(e){t.$router.push({name:"mailboxes"})},function(e){t.loginFailed=!0})}}}),y=j,_=(n("O8Q7"),Object(m["a"])(y,h,g,!1,null,"ce615f06",null)),x=_.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.account?n("div",{staticClass:"content",class:{loading:t.isLoading()}},[n("v-toolbar",{attrs:{app:"",dense:""}},["mailboxes"!==t.$route.name?n("v-btn",{attrs:{icon:""},on:{click:function(e){t.$router.back()}}},[n("v-icon",[t._v("arrow_back")])],1):t._e(),n("v-toolbar-title",[t._v("Account: "+t._s(t.account.name))]),n("v-spacer"),n("v-btn",{attrs:{icon:"",to:{name:"settings"}}},[n("v-icon",[t._v("settings")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(e){t.logout()}}},[n("v-icon",[t._v("input")])],1)],1),n("v-content",[n("router-view")],1),n("v-footer",{attrs:{fixed:t.fixed,app:""}},[n("span",[t._v("Byemail for your pleasure Â© 2018")])]),n("div",{staticClass:"waiter"},[n("v-progress-circular",{staticClass:"centered",attrs:{size:70,width:7,color:"purple",indeterminate:""}})],1)],1):t._e()},w=[],O={name:"webmail",created:function(){this.fetchData()},methods:Object(l["a"])({fetchData:function(){var t=this;this.setLoading(!0),this.$http.get("/api/account").then(function(e){t.account=e.body,t.setLoading(!1)},function(e){t.$router.push({name:"login"}),t.setLoading(!1)})},logout:function(){var t=this;this.$http.get("/logout").then(function(e){t.resetMailboxes(),t.$router.push({name:"login"})})}},Object(u["c"])(["isLoading"]),Object(u["b"])(["setLoading"]),Object(u["d"])(["resetMailboxes"])),data:function(){var t=this;return{clipped:!1,drawer:!1,fixed:!1,items:[{icon:"all_inbox",title:"Home",route:{name:"mailboxes"}},{icon:"mail",title:"Compose message",route:{name:"mailedit"}},{icon:"input",title:"Log out",action:function(){t.logout()}}],miniVariant:!1,account:null}}},M=O,C=(n("iSGH"),Object(m["a"])(M,k,w,!1,null,"05b90438",null)),D=C.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main",class:"route_"+t.$route.name},[n("div",{staticClass:"mailboxes"},[n("v-card",{staticClass:"mailboxlist"},[n("vue-pull-refresh",{attrs:{"on-refresh":t.refreshMailboxes,config:t.pull2RefreshConfig}},[n("v-toolbar",{attrs:{color:"grey",dark:"",flat:""}},[n("v-toolbar-title",[t._v("Mailboxes")]),n("v-spacer"),n("v-btn",{attrs:{icon:"",to:{name:"mailedit"}}},[n("v-icon",[t._v("email")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(e){t.refreshMailboxes()}}},[n("v-icon",[t._v("refresh")])],1)],1),n("mailbox-list",{attrs:{mailboxes:t.allMailboxes()}})],1)],1)],1),n("div",{staticClass:"mailbox"},["mailboxes"===t.$route.name?n("div",{staticClass:"filler"},[t._v("Select a mailbox from left...")]):t._e(),n("router-view")],1),n("div",{staticClass:"mail"},[n("router-view",{attrs:{name:"mail"}})],1)])},E=[],L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{staticClass:"blist",attrs:{"two-line":""}},[t._l(t.mailboxes,function(e,a){return[n("v-list-tile",{key:e.uid,attrs:{avatar:"",to:{name:"mailbox",params:{id:e.uid}}}},[n("v-list-tile-content",[e.name?n("v-list-tile-title",{domProps:{innerHTML:t._s(e.name)}}):n("v-list-tile-title",{domProps:{innerHTML:t._s(e.address)}}),n("v-list-tile-sub-title",[t._v(t._s(e.last_message.fromNow())+" - "+t._s(e.totals)+" msgs")])],1),e.unreads?n("v-list-tile-action",[n("v-badge",{attrs:{right:"",overlap:""},model:{value:e.unreads,callback:function(n){t.$set(e,"unreads",n)},expression:"mailbox.unreads"}},[e.unreads<=9?n("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(e.unreads))]):n("span",{attrs:{slot:"badge"},slot:"badge"},[t._v("9+")]),n("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("chat_bubble")])],1)],1):t._e()],1),a+1<t.mailboxes.length?n("v-divider",{key:"divider-"+a}):t._e()]})],2)},A=[],S=n("cv67"),I=n.n(S),z={name:"mailbox-list",props:["mailboxes"],created:function(){},methods:{gravatarUrl:function(t){var e=t.address,n=I()(e);return"https://www.gravatar.com/avatar/"+n+"?d=identicon"}},data:function(){return{}}},P=z,T=(n("w1P5"),Object(m["a"])(P,L,A,!1,null,"21a3affa",null)),$=T.exports,N=n("NnI0"),B=n.n(N),U={name:"mailboxes",data:function(){return{pull2RefreshConfig:{errorLabel:"Refresh failed !",startLabel:"Pull to refresh",readyLabel:"Release now",loadingLabel:"Loading...",pullDownHeight:"100"}}},created:function(){this.fetchData()},methods:Object(l["a"])({fetchData:function(){this.refreshMailboxes()},refreshMailboxes:function(){var t=this;this.setLoading(!0),this.getAllMailboxes().then(function(){t.setLoading(!1)})}},Object(u["c"])(["allMailboxes"]),Object(u["b"])(["getAllMailboxes","setLoading"])),components:{MailboxList:$,"vue-pull-refresh":B.a}},F=U,V=(n("qg3c"),Object(m["a"])(F,R,E,!1,null,"14bd4aa4",null)),W=V.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.currentMailbox()?n("v-card",[n("v-toolbar",{attrs:{color:"grey",dark:"",flat:""}},[n("v-toolbar-title",[t._v("Mailbox: "+t._s(t.currentMailbox().name)+" <"+t._s(t.currentMailbox().address)+">")]),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(e){t.writeMail()}}},[n("v-icon",[t._v("email")])],1),t.currentMailbox().unreads?n("v-btn",{attrs:{icon:""},on:{click:t.markAllMailRead}},[n("v-icon",[t._v("visibility_off")])],1):t._e()],1),n("message-list",{attrs:{messages:t.currentMailbox().messages}})],1):t._e()},J=[],Q=n("LvDl"),H=n.n(Q),q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list",{staticClass:"maillist",attrs:{"two-line":""}},[t._l(t.messages,function(e){return[n("v-list-tile",{key:e.uid,class:{incoming:e.incoming},attrs:{avatar:"",to:{name:"mail",params:{mail_id:e.uid}}}},[n("v-list-tile-content",[e.subject?n("v-list-tile-title",[t._v(t._s(e.subject))]):n("v-list-tile-title",[t._v("(No subject)")]),n("v-list-tile-sub-title",[n("span",[t._v(t._s(e.date.fromNow()))]),e.attachments.length?n("span",[t._v("\n            | "+t._s(e.attachments.length)+" "),n("v-icon",[t._v("attach_file")])],1):t._e()])],1),e.unread?n("v-list-tile-action",[n("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("visibility")])],1):t._e()],1)]})],2)},X=[],K={name:"message-list",props:["messages"]},G=K,Z=(n("nIUF"),Object(m["a"])(G,q,X,!1,null,"8ce27cac",null)),tt=Z.exports,et={name:"mailbox",created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:Object(l["a"])({fetchData:function(){var t=this;this.setLoading(!0);var e=this.$route.params.id;this.$store.dispatch({type:"getMailbox",mailboxId:e}).then(function(){t.setLoading(!1)})},writeMail:function(){this.resetDraft();var t={id:H.a.uniqueId(),address:this.currentMailbox().address,type:"to"};this.addDraftRecipient({recipient:t}),this.$router.push({name:"mailedit"})}},Object(u["c"])(["currentMailbox"]),Object(u["b"])(["markAllMailRead","setLoading"]),Object(u["d"])(["resetDraft","addDraftRecipient"])),components:{MessageList:tt},data:function(){return{error:null}}},nt=et,at=(n("YYHE"),Object(m["a"])(nt,Y,J,!1,null,"5a7adf47",null)),it=at.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.currentMail()&&t.showMail?n("v-card",{staticClass:"whole-mail"},[n("v-toolbar",{attrs:{color:"grey",dark:"",flat:""}},[n("v-toolbar-title",[t._v(t._s(t.currentMail().subject)+" ("+t._s(t.currentMail()["body-type"])+")")]),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(e){t.showCompose=!t.showCompose}}},[n("v-icon",[t._v("reply")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(e){t.showMail=!t.showMail}}},[n("v-icon",[t._v("close")])],1),t.currentMail().unread?n("v-btn",{attrs:{icon:""},on:{click:function(e){t.markMailRead()}}},[n("v-icon",[t._v("visibility")])],1):t._e()],1),n("div",{staticClass:"mail-header"},[t._l(t.currentMail().recipients,function(e){return n("span",{key:e.addr_spec,staticClass:"to"},[t._v("\n      To: "+t._s(e.addr_spec)+"\n      "),t.currentMail().incoming||"DELIVERED"===t.currentMail().delivery_status[e.addr_spec].status?t._e():n("span",[n("v-icon",{attrs:{color:"error"},on:{click:function(n){n.stopPropagation(),t.currentRecipient={dest:e,status:t.currentMail().delivery_status[e.addr_spec]},t.dialog=!0}}},[t._v("\n          error\n        ")])],1)])}),t._l(t.currentMail().carboncopy,function(e){return n("span",{key:e.addr_spec,staticClass:"cc"},[t._v("\n      | Cc: "+t._s(e.addr_spec)+"\n      "),t.currentMail().incoming||"DELIVERED"===t.currentMail().delivery_status[e.addr_spec].status?t._e():n("span",[n("v-icon",{attrs:{color:"error"},on:{click:function(n){n.stopPropagation(),t.currentRecipient={dest:e,status:t.currentMail().delivery_status[e.addr_spec]},t.dialog=!0}}},[t._v("\n          error\n        ")])],1)])}),n("span",[t._v("| Received "+t._s(t.currentMail().date.format("lll")))])],2),n("message-content",{attrs:{message:t.currentMail()}}),t.showCompose?n("div",{staticClass:"mail-actions"},[n("quick-reply",{attrs:{mailbox:t.currentMailbox(),message:t.currentMail()},on:{reply:t.reply}})],1):t._e(),n("v-dialog",{attrs:{"max-width":"300"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v("Delivery fails...")]),n("v-card-text",[t._v("\n        Delivery failure for "+t._s(t.currentRecipient.dest.addr_spec)+".\n        "),n("br"),t._v("\n        Failure reason :\n        "),n("br"),t._v("\n        "+t._s(t.currentRecipient.status.reason)+" : "+t._s(t.currentRecipient.status.smtp_info)+"\n        "),n("br"),n("br"),t._v("\n        Do you want to resend it ?\n      ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"error darken-1",flat:"flat"},on:{click:function(e){t.dialog=!1}}},[t._v("\n          Cancel\n        ")]),n("v-btn",{attrs:{color:"green darken-1",flat:"flat"},on:{click:function(e){t.dialog=!1,t.resend(t.currentRecipient.dest.addr_spec)}}},[t._v("\n          Resend\n        ")])],1)],1)],1)],1):t._e()},rt=[],ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mail-content"},["text/plain"==t.message["body-type"]?n("p",{staticClass:"text",domProps:{innerHTML:t._s(t.message.body)}}):t._e(),"text/html"==t.message["body-type"]?n("iframe",{staticClass:"html",attrs:{srcdoc:t.message.body}}):t._e(),t.message.attachments.length?n("div",{staticClass:"mail-attachments"},[n("h3",[t._v("\n      "+t._s(t.message.attachments.length)+"\n      "),n("v-icon",[t._v("attach_file")])],1),t._l(t.message.attachments,function(e){return n("ul",{key:e.filename},[n("li",[n("a",{attrs:{href:e.url,download:e.filename}},[t._v(t._s(e.filename))])])])})],2):t._e()])},ct=[],lt={name:"message-content",props:["message"],data:function(){return{}}},ut=lt,dt=(n("M8Iz"),Object(m["a"])(ut,ot,ct,!1,null,"10ef195b",null)),ft=dt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mail-compose"},[n("v-textarea",{model:{value:t.composeContent,callback:function(e){t.composeContent=e},expression:"composeContent"}}),n("v-btn",{attrs:{icon:""},on:{click:function(e){t.reply()}}},[n("v-icon",[t._v("send")])],1)],1)},pt=[],vt={name:"quick-reply",props:["mailbox","message"],methods:{reply:function(){var t={subject:"Re: "+this.message.subject,reply_to:this.message.id,recipients:[{address:this.mailbox.name+" <"+this.mailbox.address+">",type:"to"}],content:this.composeContent};this.$emit("reply",t),this.composeContent=""}},data:function(){return{composeContent:""}}},bt=vt,ht=(n("Xnii"),Object(m["a"])(bt,mt,pt,!1,null,"1d754302",null)),gt=ht.exports,jt={name:"mail",created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:Object(l["a"])({fetchData:function(){var t=this;this.showMail=!0,this.setLoading(!0);var e=this.$route.params.mail_id;this.$store.dispatch({type:"getMail",mailId:e}).then(function(){t.setLoading(!1)})},reply:function(t){var e=this;this.setLoading(!0),this.sendMail(t).then(function(t){e.showCompose=!1,e.setLoading(!1)})},resend:function(t){var e=this;this.setLoading(!0),this.resendMail({to:t}).then(function(t){e.setLoading(!1)})}},Object(u["c"])(["currentMail","currentMailbox"]),Object(u["b"])(["markMailRead","sendMail","resendMail","setLoading"])),components:{MessageContent:ft,QuickReply:gt},data:function(){return{showCompose:!1,showMail:!0,dialog:!1,currentRecipient:{dest:"",status:{}}}}},yt=jt,_t=(n("mvwp"),Object(m["a"])(yt,st,rt,!1,null,"ed4b99c4",null)),xt=_t.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("message-composer",{on:{sendMessage:t.send}}),n("div",{staticClass:"actions"},[n("v-btn",{on:{click:function(e){t.goBack()}}},[t._v("Cancel")])],1)],1)},wt=[],Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{"grid-list-md":"","text-xs-left":""}},[n("v-form",[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs7:""}},[t._l(t.draft().recipients,function(e,a){return n("v-layout",{key:e.id,staticClass:"recipients",attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs11:""}},[n("search-address-field",{attrs:{value:e.address},on:{update:function(n){t.updateRecipient(e,n)}}})],1),n("v-flex",{attrs:{xs1:""}},[a>=1?n("v-btn",{attrs:{color:"error",icon:""},on:{click:function(n){t.removeDraftRecipient({rid:e.id})}}},[n("v-icon",[t._v("clear")])],1):t._e()],1)],1)}),n("v-btn",{on:{click:function(e){t.addDraftEmptyRecipient()}}},[t._v("\n            Add recipient\n          ")])],2),n("v-flex",{staticClass:"attachments",attrs:{xs5:""}},[t._l(t.draft().attachments,function(e){return n("v-layout",{key:e.id,attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs11:""}},[n("attachment-field",{on:{change:function(n){t.updateAttachment(e,n)}}})],1),n("v-flex",{attrs:{xs1:""}},[n("v-btn",{attrs:{color:"error",icon:""},on:{click:function(n){t.removeDraftAttachment({aid:e.id})}}},[n("v-icon",[t._v("clear")])],1)],1)],1)}),n("v-btn",{on:{click:function(e){t.addDraftEmptyAttachment()}}},[t._v("Add attachment")])],2)],1),n("hr"),n("div",{staticClass:"mail-subject"},[n("v-text-field",{attrs:{label:"Subject"},model:{value:t.subject,callback:function(e){t.subject="string"===typeof e?e.trim():e},expression:"subject"}})],1),n("div",{staticClass:"mail-content"},[n("v-textarea",{attrs:{box:"",label:"Content"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),n("div",{staticClass:"actions"},[n("v-btn",{on:{click:t.sendData}},[t._v("Send")])],1)],1)],1)},Mt=[],Ct=(n("91GP"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",[n("v-flex",{attrs:{xs2:""}},[n("v-select",{attrs:{items:t.recipientTypes},on:{change:function(e){t.sendUpdate()}},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),n("v-flex",{attrs:{xs10:""}},[n("v-combobox",{attrs:{items:t.entries,loading:t.loading,"search-input":t.search,"item-text":"name","item-value":"name"},on:{"update:searchInput":function(e){t.search=e},change:function(e){t.sendUpdate()}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[t._v("\n            Recipient\n        ")])],1)],1)}),Dt=[],Rt={name:"message-composer",props:["value"],data:function(){return{recipientTypes:[{text:"To",value:"to"},{text:"Cc",value:"cc"},{text:"Bcc",value:"bcc"}],type:"to",entries:[],loading:!1,search:""}},watch:{search:function(t){t&&this.querySelections(t)}},methods:{sendUpdate:function(){var t=this.value;H.a.isObject(t)&&(t=t.name),this.$emit("update",{type:this.type,address:t})},querySelections:function(t){this.loading=!0,this.$http.get("/api/contacts/search",{responseType:"json",params:{text:t}}).then(function(t){this.entries=t.body.map(function(t){return{name:t}}),this.loading=!1})}}},Et=Rt,Lt=(n("dnoH"),Object(m["a"])(Et,Ct,Dt,!1,null,"578d3389",null)),At=Lt.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-text-field",{ref:"fileInput",attrs:{type:"file","prepend-icon":"attach_file"},on:{blur:function(e){t.change(e)}},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}})},It=[],zt=(n("rE2o"),n("ioFf"),n("rGqo"),{name:"message-composer",data:function(){return{filename:""}},methods:{change:function(t){var e=this,n=!0,a=!1,i=void 0;try{for(var s,r=function(){var t=s.value,n=new FileReader;n.onload=function(){e.$emit("change",{filename:t.name,b64:btoa(n.result)})},n.readAsBinaryString(t)},o=t.target.files[Symbol.iterator]();!(n=(s=o.next()).done);n=!0)r()}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}}}),Pt=zt,Tt=(n("Xlsq"),Object(m["a"])(Pt,St,It,!1,null,"365809aa",null)),$t=Tt.exports,Nt={name:"message-composer",data:function(){return{recipientTypes:[{text:"To",value:"to"},{text:"Cc",value:"cc"},{text:"Bcc",value:"bcc"}]}},created:function(){this.draft().recipients.length<1&&this.addDraftEmptyRecipient()},components:{SearchAddressField:At,AttachmentField:$t},computed:{subject:{get:function(){return this.draft().subject},set:function(t){this.setDraftSubject({subject:t})}},content:{get:function(){return this.draft().content},set:function(t){this.setDraftContent({content:t})}}},methods:Object(l["a"])({updateRecipient:function(t,e){var n=Object.assign(Object(l["a"])({},t),e);this.updateDraftRecipient({recipient:n})},updateAttachment:function(t,e){var n=Object.assign(Object(l["a"])({},t),e);this.updateDraftAttachment({attachment:n})},sendData:function(){var t={recipients:this.draft().recipients,attachments:this.draft().attachments,subject:this.draft().subject,content:this.draft().content};this.$emit("sendMessage",t)}},Object(u["b"])(["addDraftEmptyRecipient","addDraftEmptyAttachment"]),Object(u["c"])(["draft"]),Object(u["d"])(["setDraftSubject","setDraftContent","addDraftRecipient","updateDraftRecipient","removeDraftRecipient","addDraftAttachment","updateDraftAttachment","removeDraftAttachment"]))},Bt=Nt,Ut=(n("4hSP"),Object(m["a"])(Bt,Ot,Mt,!1,null,"d5efdf18",null)),Ft=Ut.exports,Vt={name:"mailedit",data:function(){return{}},components:{MessageComposer:Ft},methods:Object(l["a"])({goBack:function(){this.$router.go(-1)},send:function(t){var e=this;this.setLoading(!0),this.sendMail(t).then(function(t){e.setLoading(!1),e.$router.go(-1)})}},Object(u["b"])(["sendMail","setLoading"]))},Wt=Vt,Yt=(n("H/Bb"),Object(m["a"])(Wt,kt,wt,!1,null,"1ee05086",null)),Jt=Yt.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-content",[n("v-container",{attrs:{fluid:"","fill-height":""}},[n("v-layout",{attrs:{"justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm6:"","offset-xm3":""}},[n("v-card",[n("v-toolbar",{attrs:{color:"teal",dark:""}},[n("v-toolbar-side-icon",{attrs:{to:{name:"mailboxes"}}},[n("v-icon",[t._v("arrow_back")])],1),n("v-toolbar-title",[t._v("Settings")])],1),n("v-list",{attrs:{"two-line":"",subheader:""}},[n("v-subheader",[t._v("General")]),n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-content",[n("v-list-tile-title",[t._v("Account name")]),n("v-list-tile-sub-title",[t._v(t._s(t.account.name))])],1)],1)],1),n("v-divider"),n("v-list",{attrs:{subheader:"","two-line":""}},[n("v-subheader",[t._v("Application")]),n("notification-button"),n("v-list-tile",{attrs:{avatar:""},on:{click:function(e){t.install()}}},[n("v-list-tile-content",[n("v-list-tile-title",[t._v("Install")]),n("v-list-tile-sub-title",[t._v("Install byemail application")])],1)],1)],1)],1)],1)],1)],1)],1)},Ht=[],qt=n("lIOY"),Xt=n("oyJW"),Kt=(n("yt8O"),n("dRSK"),n("pIFo"),n("wd/R")),Gt=n.n(Kt),Zt="SET_LOADING",te="SET_NOTIFICATION",ee="setServiceWorker",ne="setMessage",ae="SET_MAILBOXES",ie="resetMailboxes",se="SET_CURRENT_MAILBOX",re="SET_CURRENT_MAIL",oe="SET_ALL_MAIL_READ",ce="SET_CURRENT_MAIL_READ",le="resetDraft",ue="addDraftRecipient",de="updateDraftRecipient",fe="removeDraftRecipient",me="addDraftAttachment",pe="updateDraftAttachment",ve="removeDraftAttachment",be="setDraftSubject",he="setDraftContent",ge={"&":"&amp;","<":"&lt;",">":"&gt;"};function je(t){return t.replace(/[&<>]/g,function(t){return ge[t]||t})}var ye,_e={all:null,current:null,mail:null},xe={allMailboxes:function(t){return null!==t.all?H.a.orderBy(t.all,"last_message","desc"):null},currentMailbox:function(t){return t.current},currentMail:function(t){return t.mail}},ke=(r={},Object(Xt["a"])(r,ae,function(t,e){var n=e.mailboxes;t.all=n}),Object(Xt["a"])(r,se,function(t,e){var n=e.mailbox;t.current=n}),Object(Xt["a"])(r,re,function(t,e){var n=e.mail;t.mail=n}),Object(Xt["a"])(r,oe,function(t){var e=!0,n=!1,a=void 0;try{for(var i,s=t.current.messages[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var r=i.value;r.unread&&(r.unread=!1)}}catch(t){n=!0,a=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw a}}t.mail&&(t.mail.unread=!1),t.current.unreads=0,t.all.find(function(e){return e.uid===t.current.uid}).unreads=0}),Object(Xt["a"])(r,ce,function(t){t.all.find(function(e){return e.uid===t.current.uid}).unreads--,t.current.unreads--,t.current.messages.find(function(e){return e.uid===t.mail.uid}).unread=!1,t.mail.unread=!1}),Object(Xt["a"])(r,ie,function(t){Object.assign(t,{all:null,current:null,mail:null})}),r),we={getAllMailboxes:function(t){var e=t.commit;return a["default"].http.get("/api/mailboxes",{responseType:"json"}).then(function(t){var n=t.body,a=!0,i=!1,s=void 0;try{for(var r,o=n[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var c=r.value;c.last_message=Gt()(c.last_message)}}catch(t){i=!0,s=t}finally{try{a||null==o.return||o.return()}finally{if(i)throw s}}e({type:ae,mailboxes:n})})},getMailbox:function(t,e){var n=t.commit,i=e.mailboxId;return a["default"].http.get("/api/mailbox/"+i,{responseType:"json"}).then(function(t){var e=t.body,a=!0,i=!1,s=void 0;try{for(var r,o=e.messages[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var c=r.value;c.date=Gt()(c.date)}}catch(t){i=!0,s=t}finally{try{a||null==o.return||o.return()}finally{if(i)throw s}}e.messages=H.a.orderBy(e.messages,"date","desc"),n({type:se,mailbox:e})})},getMail:function(t,e){var n=t.commit,i=e.mailId;return a["default"].http.get("/api/mail/"+i,{responseType:"json"}).then(function(t){var e=t.body;e.date=Gt()(e.date),"text/html"===e["body-type"]||(e.body=je(e.body).replace(/\n/g,"<br />")),n({type:re,mail:e})})},markAllMailRead:function(t){var e=t.commit,n=[],i=!0,s=!1,r=void 0;try{for(var o,c=_e.current.messages[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var l=o.value;l.unread&&n.push(a["default"].http.post("/api/mail/"+l.uid+"/mark_read"))}}catch(t){s=!0,r=t}finally{try{i||null==c.return||c.return()}finally{if(s)throw r}}return Promise.all(n).then(function(){e({type:oe})})},markMailRead:function(t){var e=t.commit;return a["default"].http.post("/api/mail/"+_e.mail.uid+"/mark_read").then(function(t){e({type:ce})})},sendMail:function(t,e){var n=t.dispatch,i=(t.commit,e.recipients),s=e.subject,r=e.content,o=e.attachments,c=e.replyTo;return a["default"].http.post("/api/sendmail/",{recipients:i,subject:s,content:r,attachments:o,replyTo:c}).then(function(t){var e=n("getAllMailboxes");return _e.current&&(e=n("getMailbox",{mailboxId:_e.current.uid})),e})},resendMail:function(t,e){var n=t.dispatch,i=(t.commit,e.to);return a["default"].http.post("/api/mail/"+_e.mail.uid+"/resend",{to:i}).then(function(t){var e=n("getAllMailboxes");return _e.current&&(e=n("getMailbox",{mailboxId:_e.current.uid})),e})}},Oe={state:_e,getters:xe,actions:we,mutations:ke},Me={draftRecipients:{},draftAttachments:{},draft:{content:"",subject:"",recipients:[],attachments:[]}},Ce={draft:function(t){var e=Object(l["a"])({},t.draft);return e.recipients=e.recipients.map(function(e){return t.draftRecipients[e]}),e.attachments=e.attachments.map(function(e){return t.draftAttachments[e]}),e}},De=(ye={},Object(Xt["a"])(ye,le,function(t){Object.assign(t,{draft:{content:"",subject:"",recipients:[],attachments:[]}}),t.draftRecipients={},t.draftAttachments={}}),Object(Xt["a"])(ye,ue,function(t,e){var n=e.recipient,i=n.id;a["default"].set(t.draftRecipients,i,n),t.draft.recipients.push(i)}),Object(Xt["a"])(ye,de,function(t,e){var n=e.recipient,a=n.id;Object.assign(t.draftRecipients[a],n)}),Object(Xt["a"])(ye,fe,function(t,e){var n=e.rid;t.draft.recipients.splice(t.draft.recipients.indexOf(n),1),delete t.draftRecipients[n]}),Object(Xt["a"])(ye,me,function(t,e){var n=e.attachment,i=n.id;a["default"].set(t.draftAttachments,i,n),t.draft.attachments.push(i)}),Object(Xt["a"])(ye,pe,function(t,e){var n=e.attachment,a=n.id;Object.assign(t.draftAttachments[a],n)}),Object(Xt["a"])(ye,ve,function(t,e){var n=e.aid;t.draft.attachments.splice(t.draft.attachments.indexOf(n),1),delete t.draftAttachments[n]}),Object(Xt["a"])(ye,be,function(t,e){var n=e.subject;t.draft.subject=n}),Object(Xt["a"])(ye,he,function(t,e){var n=e.content;t.draft.content=n}),ye),Re={addDraftEmptyRecipient:function(t){var e=t.commit,n={id:H.a.uniqueId(),address:"",type:"to"};e({type:ue,recipient:n})},addDraftEmptyAttachment:function(t){var e=t.commit,n={id:H.a.uniqueId(),filename:"",b64:""};e({type:me,attachment:n})}},Ee={state:Me,getters:Ce,actions:Re,mutations:De},Le=(n("ls82"),n("MECJ"));n("NO8f"),n("FLlr");function Ae(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(n),i=new Uint8Array(a.length),s=0;s<a.length;++s)i[s]=a.charCodeAt(s);return i}function Se(){console.log("Start notification subscription process"),navigator.serviceWorker.ready.then(function(){var t=Object(Le["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.pushManager.getSubscription().then(function(){var t=Object(Le["a"])(regeneratorRuntime.mark(function t(n){var a,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return console.log("Push already registered"),t.abrupt("return",n);case 5:return console.log("New push registration"),t.next=8,fetch("/api/subscription/");case 8:return a=t.sent,t.next=11,a.text();case 11:return i=t.sent,s=Ae(i),t.abrupt("return",e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:s}));case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).then(function(t){console.log("Send/update push subscription to server"),fetch("/api/subscription/",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:t})})},function(t){console.log("Fail to push subscription to server: ",t)});case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}var Ie,ze={notification:!1},Pe={notificationEnabled:function(t){return t.notification}},Te=Object(Xt["a"])({},te,function(t,e){t.notification=e}),$e={checkNotificationStatus:function(t){var e=t.commit;return"serviceWorker"in navigator?navigator.serviceWorker.ready.then(function(t){return t.pushManager.getSubscription()}).then(function(t){return e(te,!!t)}):(console.log("Notification subscription unaviable"),e(te,!1))},subscribeNotification:function(t){var e=t.commit;return Notification.requestPermission().then(function(t){console.log("Notification result: ",t),"granted"===t&&(Se(),e(te,!0))})},unsubscribeNotification:function(t){var e=t.commit;return navigator.serviceWorker.ready.then(function(t){return t.pushManager.getSubscription()}).then(function(t){if(t)return t.unsubscribe().then(function(){return e(te,!1),fetch("/api/unsubscription/",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify({subscription:t})})});e(te,!1)})}},Ne={state:ze,getters:Pe,actions:$e,mutations:Te},Be=n("sFTC"),Ue=n.n(Be),Fe=!1;a["default"].use(u["a"]);var Ve={isLoading:!1,message:"",messageColor:"primary",serviceWorker:!1},We=(Ie={},Object(Xt["a"])(Ie,Zt,function(t,e){t.isLoading=e}),Object(Xt["a"])(Ie,ee,function(t,e){t.serviceWorker=e}),Object(Xt["a"])(Ie,ne,function(t,e){t.message=e.message,t.messageColor=e.color}),Ie),Ye={setLoading:function(t,e){var n=t.commit;n(Zt,e)},setServiceWorker:function(t,e){var n=t.commit;n(ee,e)},showMessage:function(t,e){var n=t.commit;n(ne,e)}},Je={isLoading:function(t){return t.isLoading},serviceWorkerRegistered:function(t){return t.serviceWorker},getMessage:function(t){return{message:t.message,color:t.messageColor}}},Qe=new u["a"].Store({state:Ve,mutations:We,actions:Ye,getters:Je,modules:{mailboxes:Oe,draft:Ee,notification:Ne},strict:Fe,plugins:Fe?[Ue()()]:[]});console.log("Try to register service worker"),Object(qt["a"])("".concat("/","service-worker.js"),{ready:function(t){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB"),Qe.dispatch("setServiceWorker",!0)},registered:function(){console.log("Service worker has been registered."),Qe.dispatch("setServiceWorker",!0)},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});window.addEventListener("beforeinstallprompt",function(t){console.log("before install launched"),t.preventDefault(),t});var He=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.serviceWorkerRegistered()?n("v-list-tile",{on:{click:function(t){}}},[n("v-list-tile-action",[n("v-checkbox",{attrs:{value:t.notificationEnabled()}})],1),n("v-list-tile-content",{on:{click:function(e){t.togglePermission()}}},[n("v-list-tile-title",[t._v("Notifications")]),n("v-list-tile-sub-title",[t._v("Allow push notifications")])],1)],1):t._e()},qe=[],Xe={name:"notification-button",props:["account"],created:function(){this.checkNotificationStatus()},data:function(){return{}},methods:Object(l["a"])({togglePermission:function(){this.notificationEnabled()?this.unsubscribeNotification():this.subscribeNotification()}},Object(u["c"])(["notificationEnabled","serviceWorkerRegistered"]),Object(u["b"])(["checkNotificationStatus","subscribeNotification","unsubscribeNotification"]))},Ke=Xe,Ge=(n("yqrm"),Object(m["a"])(Ke,He,qe,!1,null,"d4858ff8",null)),Ze=Ge.exports,tn={data:function(){return{account:{name:""},installable:!1}},components:{NotificationButton:Ze},created:function(){this.fetchData(),this.installable=!0},methods:Object(l["a"])({install:function(){this.installable?(console.log("install"),(void 0).prompt(),deferredPrompt.userChoice.then(function(t){"accepted"===t.outcome?console.log("User accepted to install application"):console.log("User dismissed installation"),deferredPrompt=null})):console.log("Cant be installed")},fetchData:function(){var t=this;this.setLoading(!0),this.$http.get("/api/account").then(function(e){t.account=e.body,t.setLoading(!1)},function(e){t.$router.push({name:"login"}),t.setLoading(!1)})}},Object(u["b"])(["setLoading"]))},en=tn,nn=(n("A+sQ"),Object(m["a"])(en,Qt,Ht,!1,null,"4e62aaea",null)),an=nn.exports;a["default"].use(b["a"]);var sn=new b["a"]({routes:[{path:"/",redirect:{name:"mailboxes"}},{path:"/login",name:"login",component:x},{path:"/webmail",name:"webmail",component:D,children:[{path:"/mailboxes/",name:"mailboxes",components:{default:W},children:[{path:"mailbox/:id",name:"mailbox",components:{default:it}},{path:"mailbox/:id/mail/:mail_id",name:"mail",components:{default:it,mail:xt}}]},{path:"/mailedit",name:"mailedit",component:Jt},{path:"/config",name:"config",component:null}]},{path:"/settings",name:"settings",component:an}]}),rn=n("KN3F");a["default"].config.productionTip=!1,a["default"].use(rn["a"]),a["default"].http.interceptors.push(function(t){return function(t){t.status>=500&&(console.log("Error while accessing backend. See error below..."),Qe.dispatch("setLoading",!1),Qe.dispatch("showMessage",{color:"error",message:"Network error..."}))}}),new a["default"]({router:sn,store:Qe,render:function(t){return t(v)}}).$mount("#app")},Xlsq:function(t,e,n){"use strict";var a=n("jPke"),i=n.n(a);i.a},Xnii:function(t,e,n){"use strict";var a=n("Gb+C"),i=n.n(a);i.a},YYHE:function(t,e,n){"use strict";var a=n("iEdu"),i=n.n(a);i.a},dnoH:function(t,e,n){"use strict";var a=n("Po1J"),i=n.n(a);i.a},e1qy:function(t,e,n){},iEdu:function(t,e,n){},iSGH:function(t,e,n){"use strict";var a=n("JQ9l"),i=n.n(a);i.a},jPke:function(t,e,n){},mvwp:function(t,e,n){"use strict";var a=n("e1qy"),i=n.n(a);i.a},nIUF:function(t,e,n){"use strict";var a=n("HieW"),i=n.n(a);i.a},qg3c:function(t,e,n){"use strict";var a=n("VU6j"),i=n.n(a);i.a},slK8:function(t,e,n){},tcbX:function(t,e,n){},w1P5:function(t,e,n){"use strict";var a=n("IMwG"),i=n.n(a);i.a},yqrm:function(t,e,n){"use strict";var a=n("Flay"),i=n.n(a);i.a}});
//# sourceMappingURL=app.fc1ebabd.js.map