{"version":3,"sources":["logo.png","App.js","index.js"],"names":["module","exports","__webpack_require__","p","Led","props","react_default","a","createElement","style","overflow","whiteSpace","display","marginRight","className","concat","color","text","App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","rows","cols","status","num_clients","term","Terminal","cursorBlink","macOptionIsMeta","scrollback","terminalEl","React","createRef","resize","gridTemplateColumns","id","href","src","logo","width","alt","allow_browser_control","moment","broadcast_start_time_iso","format","position","bottom","textAlign","ref","_this2","open","document","getElementById","writeln","terminal_id","setState","ws_protocol","window","location","protocol","socket","WebSocket","hostname","port","on","key","ev","send","addEventListener","event","data","JSON","parse","write","atob","payload","clearTimeout","resizeTimeout","setTimeout","console","error","Component","ReactDOM","render","src_App_0","initial_data"],"mappings":"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","file":"static/js/main.418b1700.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.74cdedb8.png\";","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport logo from \"./logo.png\"; // logomakr.com/4N54oK\nimport { Terminal } from \"xterm\";\nimport moment from \"moment\";\n\nfunction Led(props) {\n  return (\n    <div\n      style={{\n        overflow: \"hidden\",\n        whiteSpace: \"nowrap\"\n      }}\n    >\n      <div\n        style={{ display: \"inline-block\", marginRight: \"5px\" }}\n        className={`led led-${props.color}`}\n      />\n      <span>{props.text}</span>\n    </div>\n  );\n}\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      rows: this.props.rows || 20,\n      cols: this.props.cols || 60,\n      status: \"connection-pending\",\n      num_clients: this.props.num_clients\n    };\n    this.term = new Terminal({\n      cursorBlink: true,\n      macOptionIsMeta: true,\n      scrollback: 1000\n    });\n    this.terminalEl = React.createRef();\n    this.term.resize(this.state.cols, this.state.rows);\n  }\n  render() {\n    return (\n      <div\n        style={{\n          display: \"grid\",\n          gridTemplateColumns: \"1fr 4fr\"\n        }}\n      >\n        <div id=\"stats\">\n          <a href=\"https://github.com/cs01/termpair\">\n            <img src={logo} width=\"200px\" alt=\"logo\" />\n          </a>\n          <table>\n            <tbody>\n              <tr>\n                <td>Status</td>\n                <td>\n                  {this.state.status === \"connected\" ? (\n                    <Led color=\"green\" text={this.state.status} />\n                  ) : (\n                    <Led color=\"red\" text={this.state.status} />\n                  )}\n                </td>\n              </tr>\n              <tr>\n                <td>Control</td>\n                <td>\n                  {this.props.allow_browser_control ? (\n                    <Led color=\"green\" text=\"enabled\" />\n                  ) : (\n                    <Led color=\"orange\" text=\"disabled\" />\n                  )}\n                </td>\n              </tr>\n              <tr>\n                <td>Connected Clients</td>\n                <td>{this.state.num_clients}</td>\n              </tr>\n              <tr>\n                <td>Broadcast start time</td>\n                <td>\n                  {moment(this.props.broadcast_start_time_iso).format(\n                    \"dddd, MMMM Do YYYY, h:mm:ss a\"\n                  )}\n                </td>\n              </tr>\n              <tr>\n                <td>Rows</td>\n                <td>{this.state.rows}</td>\n              </tr>\n              <tr>\n                <td>Columns</td>\n                <td>{this.state.cols}</td>\n              </tr>\n            </tbody>\n          </table>\n\n          <div style={{ position: \"absolute\", bottom: 0, textAlign: \"center\" }}>\n            <p>\n              Built by Chad Smith <br />{\" \"}\n              <a href=\"https://github.com/cs01\">GitHub</a> |{\" \"}\n              <a href=\"https://twitter.com/grassfedcode\">Twitter</a>\n            </p>\n            <p>\n              Powered by{\" \"}\n              <a href=\"https://github.com/bocadilloproject/bocadillo\">\n                Bocadillo\n              </a>\n            </p>\n          </div>\n        </div>\n\n        <div id=\"content\">\n          <div\n            id=\"terminal\"\n            className={this.state.status}\n            ref={this.terminalEl}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    const term = this.term;\n\n    term.open(document.getElementById(\"terminal\"));\n    term.writeln(`Welcome to TermPair!`);\n    term.writeln(\"https://github.com/cs01/termpair\");\n    if (!this.props.terminal_id) {\n      term.writeln(\"\");\n      term.writeln(\"A valid terminal id was not provided.\");\n      term.writeln(\"To view or broadcast a terminal, see instructions at\");\n      term.writeln(\"https://github.com/cs01/termpair\");\n      this.setState({ status: \"disconnected\" });\n      return;\n    }\n    term.writeln(\"Connecting to terminal...\");\n    const ws_protocol = window.location.protocol === \"https:\" ? \"wss\" : \"ws\";\n    const socket = new WebSocket(\n      `${ws_protocol}://${window.location.hostname}:${\n        window.location.port\n      }/connect_browser_to_terminal?id=${this.props.terminal_id}`\n    );\n\n    term.on(\"key\", (key, ev) => {\n      socket.send(key);\n    });\n    socket.addEventListener(\"open\", event => {\n      this.setState({ status: \"connected\" });\n      term.writeln(\"Connection established\");\n    });\n\n    socket.addEventListener(\"close\", event => {\n      this.setState({ status: \"disconnected\" });\n      term.writeln(\"Connection ended\");\n      this.setState({ num_clients: 0 });\n    });\n\n    socket.addEventListener(\"message\", event => {\n      const data = JSON.parse(event.data);\n      if (data.event === \"new_output\") {\n        term.write(atob(data.payload));\n      } else if (data.event === \"resize\") {\n        clearTimeout(this.resizeTimeout);\n        this.resizeTimeout = setTimeout(() => {\n          this.term.resize(data.payload.cols, data.payload.rows);\n          this.setState({ rows: data.payload.rows, cols: data.payload.cols });\n        }, 500);\n      } else if (data.event === \"num_clients\") {\n        this.setState({ num_clients: data.payload });\n      } else {\n        console.error(\"unknown event type\", data);\n      }\n    });\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App {...window.initial_data} />, document.getElementById('root'));\n\n"],"sourceRoot":""}