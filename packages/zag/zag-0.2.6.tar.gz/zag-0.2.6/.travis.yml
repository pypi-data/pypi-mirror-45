sudo: false
language: python
cache:
  directories:
  - "$HOME/.cache/pip"
matrix:
  include:
  - python: 3.7
    env: TOXENV=pep8
    dist: xenial
    sudo: true
  - python: 2.7
    env: TOXENV=py27
  - python: 3.7
    env: TOXENV=py37
    dist: xenial
    sudo: true
  - python: 3.7
    dist: xenial
    sudo: true
    script: skip  # Skipping as tests are executed prior to hitting this stage
    if: tag =~ ^v
    deploy:
      provider: pypi
      user: jimbobhickville
      password:
        secure: "d0jPJhssJtUf0G1u6/r1zGY/1L2slyvPPLYH29/Bn2yhnqgu/TV6NdixBZjWTkGDylvdutMLjhzAX+XtpHYqOY6GWsR4o2CbsB06kzTBk2yvAQt6vel4dyV60txTl2cYOE+yIyPkmt6TPlWsGSAv9e++NqHF9LpvNv9tAxhFucP35dAnVofW+WncXLRr8pufdXdx2oOsTmyB4Z+yxlk83tfYXungW7Ys3whrpTMVRLPmAJIk7jWlDIvIwiMzw/KTmqQr/x/PN26DRW1j3Hzj/zMURJ+5TzwCRUYit8ayvdnXUSKtOYahWpXG+zFvaw3kGBP0Qh/AIe6r2UmmZk4isEH+AYYEF1XtS67QPLYVGBnQgFE/reHefbLOx9VOcjEixbcCYVJFYWNdt7RZoLxJ/fi7pJie+gP1aARqQcfXxZTvLY5rb1eSb+Gkpy9iNqI4uULXWTLL0GefSrzoGZNAGkUn7sDvvTQ8TTxQbeIJTKcJV8dq7aZx/+XBern5t7a234lv0Sqrc3fU9MYtjTL3pplfF4j5M1P+IVfOaT+jeQGnIOq+J/fbQKwGzaNZficBf77NJYDgtNVrOc+wm66PV+j7m4gAACx4f4aD4E+8KpKDRdM6k66SNAknK0qZ6c1fksBF8a95BeAPer6O4e5TlRXcHpEFphZWUnPviehVJp0="
      distributions: "sdist bdist_wheel"
      on:
        tags: true

install:
- pip install tox
script:
- tox -e $TOXENV
