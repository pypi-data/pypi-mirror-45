<!DOCTYPE html>
<html lang="fr">
    <head>
        <title>xio</title>
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta content="width=device-width, initial-scale=1" name="viewport" />
        
        <script language="javascript" src="/xio/sdk/bootstrap.js"></script>

    </head>
    <script>

    // test js handler
    app.routes.bind('js/some/path', function(req) {
        alert('route1 postpath='+req.postpath)
    })
    app.routes.bind('js/some/path/:id/:subid', function(req) {
        console.log(req.data)
        alert('route2 postpath='+req.context[':id']+' '+req.context[':subid'])
    })
    app.routes.bind('js/some/path/*', function(req) {
        console.log(req.data)
        alert('route3 postpath='+req.path)
    })


    // test events app

    app.on('render', function(req) {
        //alert('render '+req.path)
    })
    </script>
   
    <body>
        <xio-app>

            <xio-page id="websocket"> 
                <hr/>
                <xio-button label="CONNECT">
                    <code>
                    console.log('CONNECT')
                    window.ws = xio.app('ws://127.0.0.1:8484')
                    console.log(ws)
                    window.ws._handler.connect()
                    </code>
                </xio-button>
                <xio-button label="HELLO">
                    <code>
                    window.ws.get('hello')
                    </code>
                </xio-button>            
            </xio-page>

            <xio-page id="core" > 
                <hr/>includes attribute
                <xio-section include="includes/test.html"></xio-section>
                <hr/>includes tags
                <xio-section>
                    <xio-include src="includes/test.html"></xio-include>
                    <xio-include src="includes/test.json"></xio-include>
                </xio-section>
                <hr/>data inline
                <xio-section>
                    <xio-data name="mydata">[{"label": "item1"},{"label": "item2"}]</xio-data>
                    <xio-code>
                        console.log('------------')
                        console.log(app)
                        console.log(this.nx)
                    </xio-code>
                </xio-section>
                <hr/>data included attribute
                
                <xio-section>
                    <xio-data content="includes/test.json"></xio-data>
                </xio-section>

                <hr/>data included element
                <xio-section>
                    <xio-data >
                        <xio-include src="includes/test.json"></xio-include>
                    </xio-data>
                </xio-section>

                <hr/>inlin data+template
                <xio-section>
                    <xio-data>
                        {"somekey": "test OK"}
                    </xio-data>
                    <template>
                        {{somekey}}
                    </template>
                </xio-section>

            </xio-page>

            <xio-page id="tags"> 
                <hr/>
                <xio-button><code>alert('ok')</code></xio-button>
                <ul>
                    <li><a href="#js/some/path">js/some/path</a></li> 
                    <li><a href="#js/some/path/with/somepath">js/some/path/with/somepath</a></li>
                    <li><a href="#js/some/path/with/some/path">js/some/path/with/some/path</a></li>
                </ul>
                <hr/>
                <xio-breadcrumb path="some/path/for/breadcrumb"></xio-breadcrumb>
                <xio-breadcrumb basehref="#mylink=" path="some/path/for/breadcrumb"></xio-breadcrumb>
                <xio-breadcrumb handler="alert" path="some/path/for/breadcrumb"><xio-breadcrumb>
            </xio-page>
            


        </xio-app>
    </body>
</html>
