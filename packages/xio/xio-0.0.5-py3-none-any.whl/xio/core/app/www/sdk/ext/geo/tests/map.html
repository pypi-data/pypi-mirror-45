<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

      <title>map</title>

    <!--
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.1.0/dist/leaflet.css"
       integrity="sha512-wcw6ts8Anuw10Mzh9Ytw4pylW8+NAD4ch3lqm9lzAsTxg0GFeJgoAtxuCLREZSC5lUXdVyo/7yfsqFjQ4S+aKw=="
       crossorigin=""/>

     <script src="https://unpkg.com/leaflet@1.1.0/dist/leaflet.js"
       integrity="sha512-mNqn2Wg7tSToJhvHcqfzLMU6J4mkOImSPTxVZAdo+lcPlk+GhZmYgACEe0x35K7YzW1zJ7XyJV/TT1MrdXvMcA=="
       crossorigin=""></script>
    -->
        <script language="javascript" src="leaflet/leaflet.js"> </script>
        <link rel="stylesheet" href="leaflet/leaflet.css"></link>
        <script language="javascript" src="../lib/jquery.min.js"> </script>
        <script language="javascript" src="../xio.js"> </script>
        <script language="javascript" src="../inxio.js"> </script>

        <style>
            html,body {
            height: 100%; 
            width:100%
            }
            #mapid { 
                border: solid 1px #F80;
                height: 100%; 
                width:100%
            }
        </style>


    </head>
   <body >
  

    <div id="mapid" ></div>
    <script>


	    var mymap = L.map('mapid').setView([51.505, -0.09], 7);

	    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		    maxZoom: 18,
		    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			    '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			    'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		    id: 'mapbox.streets'
	    }).addTo(mymap);

        var lat = 51.000 //data['latitude']
        var long = -0.09 //data['longitude']
        var info = 'description' //data['description']
        var marker = L.marker([lat,long]).addTo(mymap);
        marker.bindPopup(info).openPopup();  


        $.ajax('map.json').then(function(data) {
            alert(data)
            $(data).each( function(index,val ) {
                var marker = L.marker([val['lat'],val['long']]).addTo(mymap);
                var info = val['name']+'\n'+val['address']
                marker.bindPopup(info).openPopup(); 
            })
        })



    </script>


  </body>
</html>
