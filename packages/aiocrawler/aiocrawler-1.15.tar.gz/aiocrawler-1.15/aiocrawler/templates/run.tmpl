# coding: utf-8
# Date      : $date
# PROJECT   : $project_name
# File      : $filename
from aiocrawler import Engine
from $project_name.settings import $settings_name


def run(spider_module):
    settings = $settings_name()
    spider = spider_module(settings)
    middlewares = [
        (middleware(settings), value) for middleware, value in settings.DOWNLOADER_MIDDLEWARES
    ]
    engine = Engine(
        spider=spider,
        settings=settings,
        downloader_middlewares=middlewares
    )
    engine.run()
